<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>canvas_learn | xiao啊菲-博客</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="canvas," />
  

  <meta name="description" content="学习链接五分钟学会 Canvas 基础五分钟学会 Canvas 基础 二Canvas tutorial
wait如何实现Canvas图像的拖拽、点击等操作 - Darly如何实现Canvas图像的拖拽、点击等操作
使用1234567&amp;lt;canvas id=&quot;stockGraph&quot; width=&quot;150&quot; height=&quot;150&quot;&amp;gt;  current stock price: $3.1">
<meta property="og:type" content="article">
<meta property="og:title" content="canvas_learn">
<meta property="og:url" content="/2017/01/canvas-learn/index.html">
<meta property="og:site_name" content="xiao啊菲-博客">
<meta property="og:description" content="学习链接五分钟学会 Canvas 基础五分钟学会 Canvas 基础 二Canvas tutorial
wait如何实现Canvas图像的拖拽、点击等操作 - Darly如何实现Canvas图像的拖拽、点击等操作
使用1234567&amp;lt;canvas id=&quot;stockGraph&quot; width=&quot;150&quot; height=&quot;150&quot;&amp;gt;  current stock price: $3.1">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/693359-a77529261762cd36.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2017-01-24T06:17:54.012Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="canvas_learn">
<meta name="twitter:description" content="学习链接五分钟学会 Canvas 基础五分钟学会 Canvas 基础 二Canvas tutorial
wait如何实现Canvas图像的拖拽、点击等操作 - Darly如何实现Canvas图像的拖拽、点击等操作
使用1234567&amp;lt;canvas id=&quot;stockGraph&quot; width=&quot;150&quot; height=&quot;150&quot;&amp;gt;  current stock price: $3.1">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/693359-a77529261762cd36.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbe6" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  
    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  
</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">XX</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">XX</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/category/"
            rel="noopener noreferrer"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/tag/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/link/"
            rel="noopener noreferrer"
            target="_self"
            >
            友链
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/atom.xml"
            rel="noopener noreferrer"
            target="_blank"
            >
            RSS
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/search/"
            rel="noopener noreferrer"
            target="_blank"
            >
            搜索
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#学习链接"><span class="toc-text">学习链接</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#使用"><span class="toc-text">使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#判断是否支持画布"><span class="toc-text">判断是否支持画布</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置画布大小"><span class="toc-text">设置画布大小</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#适配屏幕分辨率"><span class="toc-text">适配屏幕分辨率</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#坐标轴"><span class="toc-text">坐标轴</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#常用方法"><span class="toc-text">常用方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#例子"><span class="toc-text">例子</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#点-amp-线"><span class="toc-text">点&线</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#线"><span class="toc-text">线</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#绘制"><span class="toc-text">绘制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#绘制风格"><span class="toc-text">绘制风格</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#画圆"><span class="toc-text">画圆</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#绘制字体"><span class="toc-text">绘制字体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bezier-and-quadratic-curves"><span class="toc-text">Bezier and quadratic curves</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#画图"><span class="toc-text">画图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#drawImage"><span class="toc-text">drawImage</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Parameters"><span class="toc-text">Parameters</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#透明"><span class="toc-text">透明</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#小案例"><span class="toc-text">小案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#时钟"><span class="toc-text">时钟</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#画一个笑脸-并通过-requestAnimationFram-添加动画"><span class="toc-text">画一个笑脸 并通过 requestAnimationFram 添加动画</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#save-amp-amp-restore"><span class="toc-text">save  && restore</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#插件"><span class="toc-text">插件</span></a></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-canvas-learn" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">canvas_learn</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2017.01.09</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>Cai</span>
        </span>
      

      


      
        <span>
          <i class="icon-comment"></i>
          <a href="http://www.baidu.com/2017/01/canvas-learn/#disqus_thread"></a>
        </span>
      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      

      
      
    </div>
  </header>

  <div class="article-content">
    
      <a id="more"></a>
<!-- toc -->
<h1 id="学习链接"><a href="#学习链接" class="headerlink" title="学习链接"></a>学习链接</h1><p><a href="http://www.jianshu.com/p/d9ec1ef9c1e8" target="_blank" rel="external">五分钟学会 Canvas 基础</a><br><a href="http://www.jianshu.com/p/2f79c3d8f9d0" target="_blank" rel="external">五分钟学会 Canvas 基础 二</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial" target="_blank" rel="external">Canvas tutorial</a></p>
<p>wait<br><a href="http://www.tuicool.com/articles/bMBVzu" target="_blank" rel="external">如何实现Canvas图像的拖拽、点击等操作 - Darly</a><br><a href="http://www.cnblogs.com/ghost-xyx/p/3833179.html?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">如何实现Canvas图像的拖拽、点击等操作</a></p>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"stockGraph"</span> <span class="attr">width</span>=<span class="string">"150"</span> <span class="attr">height</span>=<span class="string">"150"</span>&gt;</span></div><div class="line">  current stock price: $3.15 +0.15</div><div class="line"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"clock"</span> <span class="attr">width</span>=<span class="string">"150"</span> <span class="attr">height</span>=<span class="string">"150"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/clock.png"</span> <span class="attr">width</span>=<span class="string">"150"</span> <span class="attr">height</span>=<span class="string">"150"</span> <span class="attr">alt</span>=<span class="string">""</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>canvas 默认样式的宽度和高度 是 300px * 150px。</p>
</blockquote>
<h2 id="判断是否支持画布"><a href="#判断是否支持画布" class="headerlink" title="判断是否支持画布"></a>判断是否支持画布</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var canvas = document.getElementById(&apos;tutorial&apos;);</div><div class="line"></div><div class="line">if (canvas.getContext)&#123;</div><div class="line">  var ctx = canvas.getContext(&apos;2d&apos;);</div><div class="line">  // drawing code here</div><div class="line">&#125; else &#123;</div><div class="line">  // canvas-unsupported code here</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="设置画布大小"><a href="#设置画布大小" class="headerlink" title="设置画布大小"></a>设置画布大小</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas_1"</span>&gt;</span></div><div class="line"> 我们在设置 canvas 之前需要首先监测用户电脑是否支持 canvas</div><div class="line"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div></pre></td></tr></table></figure>
<p> 如果通过style.<em> 来进行画布大小设置，<em>*画布变大，内容也相应的变大，被拉伸了。</em></em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//错误示范</span></div><div class="line"> <span class="keyword">var</span> canvas_1 = <span class="built_in">document</span>.getElementById(<span class="string">"canvas_1"</span>);</div><div class="line"> <span class="comment">// 设置宽度和高度,但是这种写法会造成额外的问题</span></div><div class="line"> <span class="comment">// 画布会拉伸</span></div><div class="line"> <span class="comment">// canvas_1.style.width = "500px";</span></div><div class="line"> <span class="comment">// canvas_1.style.height = "500px";</span></div></pre></td></tr></table></figure>
<p> <strong>推荐写法</strong><br> <strong>画布变大 内容不变</strong></p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">canvas.setAttribute(&apos;width&apos;,400);//注意，不要加 px</div><div class="line">canvas.setAttribute(&apos;height&apos;,400);</div></pre></td></tr></table></figure>
<h2 id="适配屏幕分辨率"><a href="#适配屏幕分辨率" class="headerlink" title="适配屏幕分辨率"></a>适配屏幕分辨率</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//原本为200px*200px 的画布 </span></div><div class="line"><span class="keyword">if</span>(<span class="built_in">window</span>.devicePixelRatio ==<span class="number">2</span> )&#123;</div><div class="line"><span class="comment">//设置画大小</span></div><div class="line">canvas.setAttribute(<span class="string">'width'</span>,<span class="number">400</span>);</div><div class="line">canvas.setAttribute(<span class="string">'height'</span>,<span class="number">400</span>);</div><div class="line"><span class="comment">//设置内容变大</span></div><div class="line">ctx.scale(<span class="number">2</span>,<span class="number">2</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>画布生成的内容最后就是jpg 的形式，所以在通过css调整显示</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-id">#canvas</span>&#123;</div><div class="line">  <span class="attribute">height</span>:<span class="number">200px</span>;</div><div class="line">  <span class="attribute">width</span>:<span class="number">200px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="坐标轴"><a href="#坐标轴" class="headerlink" title="坐标轴"></a>坐标轴</h2><p>横轴向右是正，纵轴向下是正。<br><img src="http://upload-images.jianshu.io/upload_images/693359-a77529261762cd36.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="canvas坐标轴"></p>
<h1 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h1><h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">var canvas = document.getElementById(&apos;tutorial&apos;);</div><div class="line">var ctx = canvas.getContext(&apos;2d&apos;);</div><div class="line"></div><div class="line">if (canvas.getContext)&#123;</div><div class="line">  var ctx = canvas.getContext(&apos;2d&apos;);</div><div class="line">  // drawing code here</div><div class="line">&#125; else &#123;</div><div class="line">  // canvas-unsupported code here</div><div class="line">&#125;</div><div class="line"></div><div class="line">//填充属性</div><div class="line">ctx.fillStyle = &quot;rgb(200,0,0)&quot;;</div><div class="line">ctx.fillStyle = &quot;rgba(0, 0, 200, 0.5)&quot;;</div><div class="line"></div><div class="line">//填充圆</div><div class="line">ctx.fillRect (10, 10, 50, 50);</div><div class="line"></div><div class="line">//画一个 xxx什么都型</div><div class="line"></div><div class="line">// 开始绘制</div><div class="line">ctx.beginPath();</div><div class="line"></div><div class="line">//设置绘制起点</div><div class="line">ctx.moveTo(100,100);</div><div class="line"></div><div class="line">//设置绘制下一个点</div><div class="line">ctx.lineTo(700,400);</div><div class="line"></div><div class="line">//设置绘制下一个点</div><div class="line">ctx.lineTo(400,100);</div><div class="line"></div><div class="line">//设置绘制下一个点</div><div class="line">ctx.lineTo(600,500);</div><div class="line"></div><div class="line">//结束绘制</div><div class="line">ctx.closePath();</div><div class="line"></div><div class="line">//设置线的宽度</div><div class="line">ctx.lineWidth = 10;</div><div class="line"></div><div class="line">//设置绘制的样式</div><div class="line">ctx.strokeStyle = &quot;red&quot;;</div><div class="line"></div><div class="line">//绘制点之间的线路</div><div class="line">ctx.stroke();</div><div class="line"></div><div class="line">// 设置填充样式</div><div class="line">ctx.fillStyle = &quot;green&quot;;</div><div class="line"></div><div class="line">// 填充当前视图</div><div class="line">ctx.fill();</div><div class="line"></div><div class="line">// 注意：所有的绘制相应属性全部应该放在 closePath 之前</div></pre></td></tr></table></figure>
<h2 id="点-amp-线"><a href="#点-amp-线" class="headerlink" title="点&amp;线"></a>点&amp;线</h2><p>moveTo<br>lineTo</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//设置绘制起点</span></div><div class="line">    ctx.moveTo(<span class="number">100</span>,<span class="number">100</span>);</div><div class="line"></div><div class="line">    <span class="comment">//设置绘制下一个点</span></div><div class="line">    ctx.lineTo(<span class="number">700</span>,<span class="number">400</span>);</div><div class="line"></div><div class="line">    <span class="comment">//设置绘制下一个点</span></div><div class="line">    ctx.lineTo(<span class="number">400</span>,<span class="number">100</span>);</div></pre></td></tr></table></figure>
<h3 id="线"><a href="#线" class="headerlink" title="线"></a>线</h3><p><code>lineWidth</code> 设置线的宽度<br><code>lineJoin</code> 设置返回所创建边角的类型，当两条线交汇时。</p>
<ul>
<li>bevel    创建斜角</li>
<li>round    创建圆角</li>
<li>miter    默认，创建尖角</li>
</ul>
<h2 id="绘制"><a href="#绘制" class="headerlink" title="绘制"></a>绘制</h2><p><code>fill()</code>    填充 canvas 当前路径<br><code>stroke()</code>    填充 canvas 当前路径绘制边框<br><code>strokeRect(float x,float y,float width,float height)</code>    绘制一个矩形边框<br><code>fillRect(float x,float y,float width,float height)</code>    填充一个矩形边框</p>
<h2 id="绘制风格"><a href="#绘制风格" class="headerlink" title="绘制风格"></a>绘制风格</h2><p><code>fillStyle()</code>    设置填充 canvas 路径所使用的填充风格<br><code>strokeStyle()</code>    设置绘制 canvas 路径的填充风格<br><code>lineWidth()</code>    设置笔触线条的宽度</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ctx.fillStyle = <span class="string">"rgb(200,0,0)"</span>;</div><div class="line">ctx.fillStyle = <span class="string">"rgba(0, 0, 200, 0.5)"</span>;</div></pre></td></tr></table></figure>
<h2 id="画圆"><a href="#画圆" class="headerlink" title="画圆"></a>画圆</h2><p><code>arc(x, y, radius, startAngle, endAngle, anticlockwise)</code><br><code>arcTo(x1, y1, x2, y2, radius)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</div><div class="line">      <span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++)&#123;</div><div class="line">        ctx.beginPath();</div><div class="line">        <span class="keyword">var</span> x = <span class="number">25</span>+j*<span class="number">50</span>; <span class="comment">// x coordinate</span></div><div class="line">        <span class="keyword">var</span> y = <span class="number">25</span>+i*<span class="number">50</span>; <span class="comment">// y coordinate</span></div><div class="line">        <span class="keyword">var</span> radius = <span class="number">20</span>; <span class="comment">// Arc radius</span></div><div class="line">        <span class="keyword">var</span> startAngle = <span class="number">0</span>; <span class="comment">// Starting point on circle</span></div><div class="line">        <span class="keyword">var</span> endAngle = <span class="built_in">Math</span>.PI+(<span class="built_in">Math</span>.PI*j)/<span class="number">2</span>; <span class="comment">// End point on circle</span></div><div class="line">        <span class="keyword">var</span> anticlockwise = i%<span class="number">2</span>==<span class="number">0</span> ? <span class="literal">false</span> : <span class="literal">true</span>; <span class="comment">// clockwise or anticlockwise</span></div><div class="line"></div><div class="line">        ctx.arc(x, y, radius, startAngle, endAngle, anticlockwise);</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (i&gt;<span class="number">1</span>)&#123;</div><div class="line">          ctx.fill();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">          ctx.stroke();</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h2 id="绘制字体"><a href="#绘制字体" class="headerlink" title="绘制字体"></a>绘制字体</h2><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Drawing_text" target="_blank" rel="external">MDN-Drawing text</a><br><code>fillText(String Text, float x, float y, [float maxWidth])</code>    填充字符串<br><code>strokeText(String Text, float x, float y, [float maxWidth])</code>    绘制字符串边框<br><code>textAlign</code>    设置绘制字符串的水平对齐方式(start、end、left、right、center等)<br><code>textBaseAlign</code>    设置绘制字符串的垂直对齐方式(top、hanging、middle、alphabetic、idecgraphic、bottom 等)</p>
<h2 id="Bezier-and-quadratic-curves"><a href="#Bezier-and-quadratic-curves" class="headerlink" title="Bezier and quadratic curves"></a>Bezier and quadratic curves</h2><p>cp = control point.<br><code>quadraticCurveTo(cp1x, cp1y, x, y)</code><br><code>bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y)</code></p>
<h2 id="画图"><a href="#画图" class="headerlink" title="画图"></a>画图</h2><h3 id="drawImage"><a href="#drawImage" class="headerlink" title="drawImage"></a>drawImage</h3><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Using_images" target="_blank" rel="external">Using images</a><br><code>drawImage(image, x, y)</code><br><code>drawImage(image, x, y, width, height)</code><br><code>drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">function draw() &#123;</div><div class="line">  var ctx = document.getElementById(&apos;canvas&apos;).getContext(&apos;2d&apos;);</div><div class="line">  var img = new Image();</div><div class="line">  img.onload = function()&#123;</div><div class="line">    ctx.drawImage(img,0,0);</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.moveTo(30,96);</div><div class="line">    ctx.lineTo(70,66);</div><div class="line">    ctx.lineTo(103,76);</div><div class="line">    ctx.lineTo(170,15);</div><div class="line">    ctx.stroke();</div><div class="line">  &#125;;</div><div class="line">  img.src = &apos;https://mdn.mozillademos.org/files/5395/backdrop.png&apos;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Parameters"><a href="#Parameters" class="headerlink" title="Parameters"></a>Parameters</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var img = new Image();</div><div class="line">   img.src = &apos;https://mdn.mozillademos.org/files/222/Canvas_createpattern.png&apos;;</div><div class="line">   img.onload = function () &#123;</div><div class="line">       var pattern = ctx.createPattern(img, &apos;repeat&apos;);</div><div class="line">       ctx.fillStyle = pattern;</div><div class="line">       ctx.fillRect(0, 0, 400, 400);</div><div class="line">   &#125;;</div></pre></td></tr></table></figure>
<h2 id="透明"><a href="#透明" class="headerlink" title="透明"></a>透明</h2><p><code>globalAlpha  =0.1</code></p>
<h1 id="小案例"><a href="#小案例" class="headerlink" title="小案例"></a>小案例</h1><h2 id="时钟"><a href="#时钟" class="headerlink" title="时钟"></a>时钟</h2><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Basic_animations" target="_blank" rel="external">An animated clock</a></p>
<h2 id="画一个笑脸-并通过-requestAnimationFram-添加动画"><a href="#画一个笑脸-并通过-requestAnimationFram-添加动画" class="headerlink" title="画一个笑脸 并通过 requestAnimationFram 添加动画"></a>画一个笑脸 并通过 requestAnimationFram 添加动画</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">var canvas = document.getElementById(&apos;canvas&apos;);</div><div class="line">var ctx = canvas.getContext(&apos;2d&apos;);</div><div class="line"></div><div class="line">var speed = 4;</div><div class="line">var x = 0;</div><div class="line">var draw;</div><div class="line">if (window.devicePixelRatio == 2) &#123;</div><div class="line">    canvas.setAttribute(&apos;with&apos;, 1600);</div><div class="line">    canvas.setAttribute(&apos;height&apos;, 400);</div><div class="line">    ctx.scale(2, 2);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">function animate() &#123;</div><div class="line">    reqAnimaFrame = window.mozRequestAnimationFram || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;</div><div class="line">    x += speed</div><div class="line">    reqAnimaFrame(animate);</div><div class="line">    if (x &lt;= 0 || x &gt;= 600) &#123;</div><div class="line">        speed = -speed;</div><div class="line">    &#125;</div><div class="line">    draw();</div><div class="line">&#125;</div><div class="line"></div><div class="line">function draw() &#123;</div><div class="line">    //清除</div><div class="line">    ctx.clearRect(0+x-10, 0, 220, 200);</div><div class="line"></div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.fillStyle = &quot;#f1f42e&quot;;</div><div class="line">    ctx.strokeStyle = &apos;#00f&apos;;</div><div class="line"></div><div class="line">    ctx.lineWidth = 3;</div><div class="line">    ctx.arc(x+100, 100, 99, 0, Math.PI * 2);</div><div class="line">    ctx.stroke();</div><div class="line">    ctx.fill();</div><div class="line"></div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.moveTo(x+170, 100);</div><div class="line">    ctx.arc(x+100, 100, 70, 0, Math.PI)</div><div class="line">    ctx.stroke();</div><div class="line"></div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.fillStyle = &apos;black&apos;;</div><div class="line">    ctx.moveTo(x+60, 65);</div><div class="line">    ctx.arc(x+60, 65, 12, 0, Math.PI * 2);</div><div class="line">    ctx.fill();</div><div class="line"></div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.fillStyle = &apos;black&apos;;</div><div class="line">    ctx.moveTo(x+140, 65);</div><div class="line">    ctx.arc(x+140, 65, 12, 0, Math.PI * 2);</div><div class="line">    ctx.fill();</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">animate();</div></pre></td></tr></table></figure>
<h1 id="save-amp-amp-restore"><a href="#save-amp-amp-restore" class="headerlink" title="save  &amp;&amp; restore"></a>save  &amp;&amp; restore</h1><p>保存和摧毁状态</p>
<h1 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h1><p> 真的是帅到不要不要的 插件啊<br> <a href="http://seuratjs.com/" target="_blank" rel="external">seuratjs</a><br> <a href="http://indamix.github.io/real-shadow/#/box/" target="_blank" rel="external">Real Shadow</a><br> <a href="http://sigmajs.org/" target="_blank" rel="external">sigmajs </a><br> <a href="http://lab.hakim.se/scroll-effects/" target="_blank" rel="external">Canvas 做的滚动特效</a></p>

    
  </div>
</article>


   

   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2017/01/fun/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2017/01/zhengze/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/category/"
              rel="noopener noreferrer"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/tag/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/link/"
              rel="noopener noreferrer"
              target="_self"
              >
              友链
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              关于
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/atom.xml"
              rel="noopener noreferrer"
              target="_blank"
              >
              RSS
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/search/"
              rel="noopener noreferrer"
              target="_blank"
              >
              搜索
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    
  <section class="disqus-comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>

  <script>
    var disqus_shortname = 'forsigner';
    
    var disqus_url = '/2017/01/canvas-learn/';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

  <script id="dsq-count-scr" src="//forsigner.disqus.com/count.js" async></script>



    




  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>
<script src="https://cdn.bootcss.com/highlight.js/9.9.0/highlight.min.js"></script>
 <script>hljs.initHighlightingOnLoad();</script>
 <script> console.log('haha')</script>
</body>
</html>
