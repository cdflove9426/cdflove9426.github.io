(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{258:function(t,n,s){"use strict";s.r(n);var a=s(0),e=Object(a.a)({},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"content"},[t._m(0),t._m(1),s("p",[s("a",{attrs:{href:"http://www.jianshu.com/p/ee372e344d6d",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack CommonsChunkPlugin详细教程"),s("OutboundLink")],1)]),t._m(2),t._m(3),t._m(4),s("p",[t._v("在Webpack的配置中，我们可以通过CommonsChunkPlugin插件对指定的chunks进行公共模块的提取。我们指定好生成文件的名字，以及想抽取哪些入口js文件的公共代码，webpack就会自动帮我们合并好。:")]),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),s("p",[t._v("看一下下面的配置会是什么结果")]),t._m(10),s("p",[t._v("main.js,main1.js共同引用的chunk1和chunk2会被打包到jquery.js里")]),s("p",[t._v("但是如果修改为 minChunks：Infinity\nminChunks:2修改为minChunks:Infinity后，chunk1和chunk2都打包到main.js,main1.js里")]),t._m(11),t._m(12),s("p",[t._v("只有在main.js和main1.js中都引用的模块才会被打包的到公共模块（这里即jquery.js）\n也就是指打包main,main1 中的公共模块到jquery.js")]),t._m(13),s("p",[s("a",{attrs:{href:"https://sebastianblade.com/using-webpack-to-achieve-long-term-cache/#webpackmd5hash",target:"_blank",rel:"noopener noreferrer"}},[t._v("用 webpack 实现持久化缓存"),s("OutboundLink")],1)]),s("p",[t._v("过去我们使用webapck-CommonsChunkPlugin 提取公共模块，\n是希望能够将公共模块进行缓存，")]),t._m(14),s("p",[t._v("但发现vendor的hash在每次不管修改哪个文件后重新打包其实都在变化的")]),s("p",[t._v("这里我们肯定遗漏了知识点，")]),t._m(15),t._m(16),t._m(17),s("p",[s("a",{attrs:{href:"https://webpack.js.org/guides/caching/",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack2 -Caching"),s("OutboundLink")],1)]),s("p",[t._v("中有讲述到持久化缓存的问题。")]),s("p",[t._v("正如 文档"),s("a",{attrs:{href:"https://webpack.js.org/guides/code-splitting-libraries/#manifest-file",target:"_blank",rel:"noopener noreferrer"}},[t._v("# Manifest File - Code Splitting - Libraries"),s("OutboundLink")],1),t._v("中描述的那样，我们可以通过增加一个指定的公共 chunk 来提取 runtime，从而进一步实现持久化缓存：")]),t._m(18),s("p",[t._v("这样在我们构建之后，就会多打包一个特别小（不足 2kb）的 manifest.js，\n解决了 libs 经常「被」更新的问题。")]),s("p",[t._v("但是 manifest.js 实在是太小了，以至于不值得再为一个小 js 增加资源请求数量。")]),s("p",[s("a",{attrs:{href:"https://github.com/numical/script-ext-html-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("script-ext-html-webpack-plugin"),s("OutboundLink")],1),s("a",{attrs:{href:"https://webpack.js.org/guides/caching/#manifest-inlining",target:"_blank",rel:"noopener noreferrer"}},[t._v("Manifest inlining"),s("OutboundLink")],1)]),s("p",[t._v("webpack每次build的时候都会生成一些运行时代码。当只有一个文件时，运行时代码直接塞到这个文件中。当有多个文件时，运行时代码会被提取到公共文件中，也就是楼主的vendor,为了阻止这种情况，我们需要将运行环境提取到一个单独的manifest文件里。及时我们创建了另一个bundle，但从长远来看，这种消耗比单独放在一个vendor中获得的收益要大")]),t._m(19),t._m(20),t._m(21),t._m(22),s("p",[s("a",{attrs:{href:"https://juejin.im/post/587476168d6d810058a0a18a",target:"_blank",rel:"noopener noreferrer"}},[t._v("[webpack] 如何把代码内联进html中？"),s("OutboundLink")],1),t._v("\n上文将到的内联 Manifest")])])},[function(){var t=this.$createElement,n=this._self._c||t;return n("h1",{attrs:{id:"webpack-commonschunkplugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webpack-commonschunkplugin","aria-hidden":"true"}},[this._v("#")]),this._v(" webpack CommonsChunkPlugin")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h1",{attrs:{id:"commonschunkplugin-打包规则"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#commonschunkplugin-打包规则","aria-hidden":"true"}},[this._v("#")]),this._v(" CommonsChunkPlugin 打包规则")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("p",[t._v("webpack用插件CommonsChunkPlugin进行打包的时候，\n将"),s("strong",[t._v("符合引用次数(minChunks)的模块")]),t._v("打包到name参数的数组的第一个块里（chunk）,\n然后数组后面的块依次打包(查找entry里的key,没有找到相关的key就生成一个空的块)，\n"),s("strong",[t._v("最后一个块包含webpack生成的在浏览器上使用各个块的加载代码")]),t._v("，所以页面上使用的时候"),s("strong",[t._v("最后")]),t._v("一个块必须"),s("strong",[t._v("最先加载")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h1",{attrs:{id:"commonschunkplugin-的使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#commonschunkplugin-的使用","aria-hidden":"true"}},[this._v("#")]),this._v(" CommonsChunkPlugin 的使用")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[n("strong",[this._v("CommonsChunkPlugin 和web持久化缓存一起使用，效果杠杠的。")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[this._v("var chunks = Object.keys(entries); \nplugins: [ \n    new webpack.optimize.CommonsChunkPlugin({ \n        name: 'vendors', // 将公共模块提取，生成名为`vendors`的chunk \n        chunks: chunks, \n        minChunks: chunks.length // 提取所有entry共同依赖的模块 \n        }) \n],\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h1",{attrs:{id:"将公共业务模块与类库或框架分开打包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#将公共业务模块与类库或框架分开打包","aria-hidden":"true"}},[this._v("#")]),this._v(" 将公共业务模块与类库或框架分开打包")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" CommonsChunkPlugin "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("require")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"webpack/lib/optimize/CommonsChunkPlugin"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    entry"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        main"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./main.js'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        main1"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./main1.js'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        common1"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token string"}},[t._v("'jquery'")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        common2"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token string"}},[t._v("'vue'")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    output"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        path"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" __dirname "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'/dist'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        filename"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'[name].js'")]),s("span",{attrs:{class:"token comment"}},[t._v("//不使用[name]，并且插件中没有filename，")]),t._v("\n        "),s("span",{attrs:{class:"token comment"}},[t._v("//这输出文件中只用chunk.js的内容，main.js的内容不知跑哪里去了")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    plugins"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("CommonsChunkPlugin")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            name"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token string"}},[t._v('"chunk"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token string"}},[t._v('"common1"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token string"}},[t._v('"common2"')]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token comment"}},[t._v("//页面上使用的时候common2")]),t._v("\n            "),s("span",{attrs:{class:"token comment"}},[t._v("//必须最先加载")]),t._v("\n            "),s("span",{attrs:{class:"token comment"}},[t._v('// filename:"chunk.js"//忽略则以name为输出文件的名字，')]),t._v("\n                "),s("span",{attrs:{class:"token comment"}},[t._v("//否则以此为输出文件名字")]),t._v("\n            minChunks"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[n("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/2125695-c393f6cb60aed289.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})])},function(){var t=this.$createElement,n=this._self._c||t;return n("h1",{attrs:{id:"参数minchunks-infinity"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参数minchunks-infinity","aria-hidden":"true"}},[this._v("#")]),this._v(" 参数minChunks: Infinity")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" CommonsChunkPlugin "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("require")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"webpack/lib/optimize/CommonsChunkPlugin"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    entry"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        main"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./main.js'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        main1"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./main1.js'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        jquery"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token string"}},[t._v('"jquery"')]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    output"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        path"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" __dirname "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'/dist'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        filename"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'[name].js'")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    plugins"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("CommonsChunkPlugin")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            name"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"jquery"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            minChunks"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h1",{attrs:{id:"参数chunks"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参数chunks","aria-hidden":"true"}},[this._v("#")]),this._v(" 参数chunks")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" CommonsChunkPlugin "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("require")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"webpack/lib/optimize/CommonsChunkPlugin"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    entry"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        main"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./main.js'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        main1"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./main1.js'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        jquery"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token string"}},[t._v('"jquery"')]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    output"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        path"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" __dirname "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'/dist'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        filename"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'[name].js'")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    plugins"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("CommonsChunkPlugin")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            name"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"jquery"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            minChunks"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token number"}},[t._v("2")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            chunks"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token string"}},[t._v('"main"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token string"}},[t._v('"main1"')]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h1",{attrs:{id:"通过webapck-commonschunkplugin生成-mainfest实现持久化缓存"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#通过webapck-commonschunkplugin生成-mainfest实现持久化缓存","aria-hidden":"true"}},[this._v("#")]),this._v(" 通过webapck-CommonsChunkPlugin生成 mainfest实现持久化缓存")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tentry"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tapp"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./app.js'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tvendor"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token string"}},[t._v("'react'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'react-dom'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'moment'")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("/*等等其他的模块*/")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{attrs:{class:"token comment"}},[t._v("//其他配置")]),t._v("\n\tplugins"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t\t"),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("webpack"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optimize"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CommonsChunkPlugin")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            name"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'vendor'")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("blockquote",[s("p",[t._v("webpack用插件CommonsChunkPlugin进行打包的时候，\n将"),s("strong",[t._v("符合引用次数(minChunks)的模块")]),t._v("打包到name参数的数组的第一个块里（chunk）,\n然后数组后面的块依次打包(查找entry里的key,没有找到相关的key就生成一个空的块)，\n"),s("strong",[t._v("最后一个块包含webpack生成的在浏览器上使用各个块的加载代码")]),t._v("，所以页面上使用的时候"),s("strong",[t._v("最后")]),t._v("一个块必须"),s("strong",[t._v("最先加载")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("也就是说，我们每次打包，及时公共模块没有修改，但是当修改其他模块，同时webpack生成的新的 "),n("strong",[this._v("各个模块的加载码添加到vendor文件")]),this._v("，也就相当也verdor这个公共模块是有改变的，自然hash每次打包都不同了。")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[n("strong",[this._v("解决办法就是 提取出每次都变化的 加载码（mainfest）")])])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("entry"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    libs"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{attrs:{class:"token string"}},[t._v("'es6-promise/auto'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{attrs:{class:"token string"}},[t._v("'whatwg-fetch'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{attrs:{class:"token string"}},[t._v("'vue'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{attrs:{class:"token string"}},[t._v("'vue-router'")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    vendor"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{attrs:{class:"token comment"}},[t._v("/*\n       * vendor 中均是非 npm 模块，\n       * 用 resolve.alias 修改路径，\n       * 避免冗长的相对路径。\n       */")]),t._v("\n      "),s("span",{attrs:{class:"token string"}},[t._v("'assets/libs/fastclick'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{attrs:{class:"token string"}},[t._v("'components/request'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{attrs:{class:"token string"}},[t._v("'components/ui'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{attrs:{class:"token string"}},[t._v("'components/bootstrap'")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// 初始化脚本")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    page1"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'src/pages/page1'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    page2"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'src/pages/page2'")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("webpack"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optimize"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CommonsChunkPlugin")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n  "),s("span",{attrs:{class:"token comment"}},[t._v("// 将 `manifest` 优先于 libs 进行提取，")]),t._v("\n  "),s("span",{attrs:{class:"token comment"}},[t._v("// 则可以将 webpack runtime 分离到这个块中。")]),t._v("\n  names"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token string"}},[t._v("'manifest'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'libs'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'vendor'")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("reverse")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{attrs:{class:"token comment"}},[t._v("//注意这里使用了reverse()")]),t._v("\n  "),s("span",{attrs:{class:"token comment"}},[t._v("// manifest 只是个有意义的名字，也可以改成其他名字。")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h1",{attrs:{id:"注意"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注意","aria-hidden":"true"}},[this._v("#")]),this._v(" 注意")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("在提取 maninfest 的时候 ，不要使用 "),n("code",[this._v("new webpack.HotModuleReplacementPlugin(),")]),this._v("\n否则会出现错误")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("Cannot use "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("chunkhash"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" chunk "),s("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'[name].[chunkhash].js'")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("use "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hash"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" instead"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h1",{attrs:{id:"webpack-内联css-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webpack-内联css-js","aria-hidden":"true"}},[this._v("#")]),this._v(" webpack 内联css/js")])}],!1,null,null,null);n.default=e.exports}}]);