<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CaiCai9426 | ssh 远程登陆服务器</title>
    <meta name="description" content="菲菲Blog,陆续更新中">
    <link rel="icon" href="/logo.png">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/86.styles.1708be3a.css" as="style"><link rel="preload" href="/assets/js/app.fa713eac.js" as="script"><link rel="preload" href="/assets/js/73.0c199081.js" as="script"><link rel="prefetch" href="/assets/js/38.8baf7629.js"><link rel="prefetch" href="/assets/js/0.c7a94944.js"><link rel="prefetch" href="/assets/js/1.75bc214a.js"><link rel="prefetch" href="/assets/js/2.4a593960.js"><link rel="prefetch" href="/assets/js/3.f69ab2b6.js"><link rel="prefetch" href="/assets/js/4.b6ef39fa.js"><link rel="prefetch" href="/assets/js/5.91f53b8d.js"><link rel="prefetch" href="/assets/js/6.7ab4526d.js"><link rel="prefetch" href="/assets/js/7.262318e7.js"><link rel="prefetch" href="/assets/js/8.6b00c1b6.js"><link rel="prefetch" href="/assets/js/9.49213d30.js"><link rel="prefetch" href="/assets/js/10.194074c7.js"><link rel="prefetch" href="/assets/js/11.28772604.js"><link rel="prefetch" href="/assets/js/12.473fa971.js"><link rel="prefetch" href="/assets/js/13.e7244ca3.js"><link rel="prefetch" href="/assets/js/14.9f35604a.js"><link rel="prefetch" href="/assets/js/15.92de29ce.js"><link rel="prefetch" href="/assets/js/16.5081d0f4.js"><link rel="prefetch" href="/assets/js/17.8d7bbf3a.js"><link rel="prefetch" href="/assets/js/18.8b379100.js"><link rel="prefetch" href="/assets/js/19.e6213855.js"><link rel="prefetch" href="/assets/js/20.09855c55.js"><link rel="prefetch" href="/assets/js/21.deccda74.js"><link rel="prefetch" href="/assets/js/22.c3da8c3e.js"><link rel="prefetch" href="/assets/js/23.0f2bdda6.js"><link rel="prefetch" href="/assets/js/24.23916d1d.js"><link rel="prefetch" href="/assets/js/25.4a28d9a1.js"><link rel="prefetch" href="/assets/js/26.638f323d.js"><link rel="prefetch" href="/assets/js/27.9104930e.js"><link rel="prefetch" href="/assets/js/28.f4a9d74b.js"><link rel="prefetch" href="/assets/js/29.a4ffc45d.js"><link rel="prefetch" href="/assets/js/30.34c1be94.js"><link rel="prefetch" href="/assets/js/31.fc4459e1.js"><link rel="prefetch" href="/assets/js/32.6fa53274.js"><link rel="prefetch" href="/assets/js/33.d39ccb38.js"><link rel="prefetch" href="/assets/js/34.95667869.js"><link rel="prefetch" href="/assets/js/35.1c9f7cb6.js"><link rel="prefetch" href="/assets/js/36.c527c4dc.js"><link rel="prefetch" href="/assets/js/37.91db206d.js"><link rel="prefetch" href="/assets/js/39.2b9663c2.js"><link rel="prefetch" href="/assets/js/40.4879e3dd.js"><link rel="prefetch" href="/assets/js/41.bd45403e.js"><link rel="prefetch" href="/assets/js/42.bab6410e.js"><link rel="prefetch" href="/assets/js/43.b6bad706.js"><link rel="prefetch" href="/assets/js/44.3ef4ed34.js"><link rel="prefetch" href="/assets/js/45.4eaec123.js"><link rel="prefetch" href="/assets/js/46.89dbff86.js"><link rel="prefetch" href="/assets/js/47.ec3a4eb4.js"><link rel="prefetch" href="/assets/js/48.1483f745.js"><link rel="prefetch" href="/assets/js/49.ed95d1ac.js"><link rel="prefetch" href="/assets/js/50.1969a022.js"><link rel="prefetch" href="/assets/js/51.8ba405ec.js"><link rel="prefetch" href="/assets/js/52.d10260ca.js"><link rel="prefetch" href="/assets/js/53.4521a8db.js"><link rel="prefetch" href="/assets/js/54.9ad871d9.js"><link rel="prefetch" href="/assets/js/55.58623269.js"><link rel="prefetch" href="/assets/js/56.543fae7f.js"><link rel="prefetch" href="/assets/js/57.c5d65fc9.js"><link rel="prefetch" href="/assets/js/58.04c7d745.js"><link rel="prefetch" href="/assets/js/59.b512423b.js"><link rel="prefetch" href="/assets/js/60.320eda07.js"><link rel="prefetch" href="/assets/js/61.5aae5d3f.js"><link rel="prefetch" href="/assets/js/62.9dfe9e13.js"><link rel="prefetch" href="/assets/js/63.25b34838.js"><link rel="prefetch" href="/assets/js/64.d12d5002.js"><link rel="prefetch" href="/assets/js/65.42b15a91.js"><link rel="prefetch" href="/assets/js/66.cfed3a8a.js"><link rel="prefetch" href="/assets/js/67.1a3b15e5.js"><link rel="prefetch" href="/assets/js/68.9868ce12.js"><link rel="prefetch" href="/assets/js/69.2903063c.js"><link rel="prefetch" href="/assets/js/70.9b5ebefd.js"><link rel="prefetch" href="/assets/js/71.4d376bf0.js"><link rel="prefetch" href="/assets/js/72.c26dd68c.js"><link rel="prefetch" href="/assets/js/74.a575f917.js"><link rel="prefetch" href="/assets/js/75.3bb9db7f.js"><link rel="prefetch" href="/assets/js/76.77eed2ca.js"><link rel="prefetch" href="/assets/js/77.f9cdb120.js"><link rel="prefetch" href="/assets/js/78.81eb4ea8.js"><link rel="prefetch" href="/assets/js/79.bdfedc4c.js"><link rel="prefetch" href="/assets/js/80.80a3c0e7.js"><link rel="prefetch" href="/assets/js/81.1e44050b.js"><link rel="prefetch" href="/assets/js/82.6ac951ca.js"><link rel="prefetch" href="/assets/js/83.9eec4ec5.js"><link rel="prefetch" href="/assets/js/84.43236687.js"><link rel="prefetch" href="/assets/js/85.b06d6363.js">
    <link rel="stylesheet" href="/assets/css/86.styles.1708be3a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      CaiCai9426
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/deploy/jenkins_cicl.html#jenkins" class="nav-link">blog</a></div><div class="nav-item"><a href="/project/" class="nav-link">项目</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/deploy/jenkins_cicl.html#jenkins" class="nav-link">blog</a></div><div class="nav-item"><a href="/project/" class="nav-link">项目</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>vue文档</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>部署</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/deploy/jenkins_cicl.html" class="sidebar-link">关于自动化部署-jenkins</a></li><li><a href="/deploy/nginx.html" class="sidebar-link">Nginx</a></li><li><a href="/deploy/pm2.html" class="sidebar-link">pm2 </a></li><li><a href="/deploy/server_node.html" class="sidebar-link">搭建node.js 生成环境</a></li><li><a href="/deploy/ssh.html" class="active sidebar-link">ssh 远程登陆服务器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/deploy/ssh.html#账号管理" class="sidebar-link">账号管理</a></li><li class="sidebar-sub-header"><a href="/deploy/ssh.html#实现实现登录无密码登录" class="sidebar-link">实现实现登录无密码登录</a></li><li class="sidebar-sub-header"><a href="/deploy/ssh.html#修改登录端口" class="sidebar-link">修改登录端口</a></li><li class="sidebar-sub-header"><a href="/deploy/ssh.html#去掉默认-root-登录端口" class="sidebar-link">去掉默认 root 登录端口</a></li><li class="sidebar-sub-header"><a href="/deploy/ssh.html#iptables-防火墙" class="sidebar-link">iptables 防火墙</a></li><li class="sidebar-sub-header"><a href="/deploy/ssh.html#配置文件" class="sidebar-link">配置文件</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>JS文档</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>gulp文档</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>git相关文档</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Webpack</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CSS</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="ssh-远程登陆服务器"><a href="#ssh-远程登陆服务器" aria-hidden="true" class="header-anchor">#</a> ssh 远程登陆服务器</h1><p>PuTTY是一款支持Telnet，ssh连接的连接软件。类似于类Unix下的ssh服务，可以通过其连接远程服务器 并进行命令行操作。
<a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" target="_blank" rel="noopener noreferrer">下载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p><a href="http://www.aiezu.com/system/linux/xshell_ssh_public-key_login.html" target="_blank" rel="noopener noreferrer">Xshell配置ssh免密码登录-密钥公钥(Public key)与私钥(Private Key)登录<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p><a href="https://www.jianshu.com/p/6162b94110fc" target="_blank" rel="noopener noreferrer">利用 ssh 的用户配置文件 config 管理 ssh 会话<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><h1 id="通过ssh远程登录"><a href="#通过ssh远程登录" aria-hidden="true" class="header-anchor">#</a> 通过ssh远程登录</h1><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">ssh</span> root@111.111.111.111
</code></pre></div><ul><li>查看数据盘  <code>fdisk -l</code></li><li>查看硬盘  <code>df -h</code></li></ul><p>ctrl-r   清屏
login incorrect</p><h2 id="账号管理"><a href="#账号管理" aria-hidden="true" class="header-anchor">#</a> 账号管理</h2><h3 id="添加一个管理账号"><a href="#添加一个管理账号" aria-hidden="true" class="header-anchor">#</a> 添加一个管理账号</h3><p>毕竟每次有用root 账户登录 这样不够安全 所以再自己建一个
首先,远程连接并用root 账户登录</p><ol><li>添加账户
<code>adduser xxxxxx</code><code>Enter new UNIX password: ....</code></li></ol><p><img src="/assets/img/adduser.e2fae15b.png" alt="添加账户"></p><ol start="2"><li>设置修改权限</li></ol><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 添加xxx 进入管理组</span>
gpasswd -a xxx <span class="token function">sudo</span>  

<span class="token function">sudo</span> visudo
</code></pre></div><p>添加</p><div class="language-bash extra-class"><pre class="language-bash"><code>xxx  ALL<span class="token operator">=</span><span class="token punctuation">(</span>ALL,ALL<span class="token punctuation">)</span> ALL
</code></pre></div><p>以后就可以</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">ssh</span> xxx@111.111.111.111
<span class="token comment">#在数据该账号之前设置的密码登录</span>
</code></pre></div><p><img src="/assets/img/sudovisudo.bec0a57c.png" alt="修改权限1"><img src="/assets/img/addsudo.98cfbaf9.png" alt="修改权限2"></p><blockquote><p>nano 模式下 如何保存 并退出</p></blockquote><p>直接 <code>ctrl-x</code> 退出 会询问是否保存
<code>Y</code> 确定 后<strong>回车</strong></p><h2 id="实现实现登录无密码登录"><a href="#实现实现登录无密码登录" aria-hidden="true" class="header-anchor">#</a> 实现实现登录无密码登录</h2><p>原理和github的一样，如果本地配置过github，那本地就已经是有的了</p><h3 id="本地电脑生成秘钥"><a href="#本地电脑生成秘钥" aria-hidden="true" class="header-anchor">#</a> 本地电脑生成秘钥</h3><ol><li>生成</li></ol><div class="language-bash extra-class"><pre class="language-bash"><code>ssh-keygen -t rsa -b 4096 -C <span class="token string">&quot;xxx@xxx.com&quot;</span>
</code></pre></div><p><img src="/assets/img/ssh_1keygen.b3c8381d.png" alt="1"></p><div class="language-bash extra-class"><pre class="language-bash"><code> <span class="token function">eval</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>ssh-agent -s<span class="token variable">)</span></span>&quot;</span>
</code></pre></div><ol start="3"><li>加入代理</li></ol><div class="language-bash extra-class"><pre class="language-bash"><code>ssh-add ~/.ssh/id_rsa 
</code></pre></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAT0AAACBCAYAAACy5G0nAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAABD9SURBVHhe7Z2LmayqEoV3DjcLUzESAzGQiWPyOWn0ZVGggMVDW22bWed8/2y78AEFLAtb6H/mv5dlmF4/vz+vacDn4TUv28L08/v6/U2YxyV9nJX0n2lJF0ZzXqTNrzGytzNMP6951NPKDK9p/gnyZso3Dmv6YPK2lBHXcHndlKFEvnzTz/yao+ubfSL/5tNRZm+3ZR/n5fPPFJSBENKCanwsx0WPEEIsqpEQQnpFNRJCSK+oRkII6RXVSAghvaIaCSGkV1QjIYT0imp8PHh15YnvqD01X4SQBdWYZQxfoLUv8Yo9fIHWc13nx0vA82tQ087Hl632fmDsm/r+EXzhmJC7UI06mLXxo4tNGuFAAK56ifgT0RSuWSyPEa01T4OdwXKk/J8oGyF/jHWKWSxaLmJx07DappkJ+Y6L6W049vg0tONRXjwN7cds/0T5L6db0ZswVc+XPS5DVRQbKfmunP83Gad4Gt60TjEkpDPMH0RwwTxaD6K1cP6tRHqVjub20UWpIHqIlKyYmGNxzUxUeTQSkuPG5XwDhpOJqNXSbb6dP+CbOB8QJcyfnV/TaM4T+m0HufLV8vc+Q5Rn3OSuitQJ+TCygQnv6FA26rOiZQTK/hvsXBU9TNo/EsUFCxwMMjQMnxeuSJR3LEpE3nBeAYIaTvivpUN0ovxEw9mUwYriucPbWv5LwG/rsSuBL03dxuen6JFukQ2J6tCxJtnGUC6N/oqiB7E6Z4iXIy8IOzHCOkyFSElJr4leKnI4/khem8pYy/9uIIrxqjOb8hLSD27DdGIMzWyHQ4fWBKwgetvOKgIa7iMRXRJhNINja8flzy+CHHRqlDEQ9Vp6XfQkOloipTk3xC+TE71a/t7CP0pwkePgnu9R9EinuA00fD/EtOLht4VPr6fXFAEVzn/XenYbcWzC5ztlLUct/+8SlhGCPdrPcRsgpBNU48OQofM3dMBjokcIuRHVSAghvaIaCSGkV1QjIYT0imokhJBeUY2EENIrqpEQQnpFNRJCSK/4F4v5Iioh5E8gG9/y8i8hhLyJbFjRC9dUO3maEyGEPATZWJaU8kJnV1xZ534SQkgnyIY2vOU8UkJIh8gGRY8Q8keQjXR4izXV7Oq8646EEPL9YD245ZUVCN1F67URQshDUI2EENIrqpEQQnpFNRJCSK+oRkII6RXVSAghvaIaCSGkV1QjIYT0imp8PJgtUv8d3Pt5ar7O5q+Uk3SJaswyhj84/btOU0MnWO3CdZ0CP449vwY17Xx82WpT8mLf1Pc/jvtx8M2Pqd/Fvf4n5GRUo84gU9O0xp7e+SEAV3X6T0QZuGaxPOMc5Ak/Tn6l6AGsgvMZ0fuE/wk5ETfv1kQOsWi5iMV1rOVzSKbT5TvFIBGKiRKOz+k9GmUYIQoisR+z/RPlv5xuRW9KpuktxzaIYpUhjhTNtedwEQi71JdLsxH2p0SPUR75eswfRHDzuElEJ4xWXrGRXqWjuX30TlEQPURKrrPbRQ8yUeXRKEOOG5fzDeZ6oWi3pNt8O3/AN3E+IJrzazZMRpCWdQkbkcg4OB9EblnCHwIXzoV2Almriws46n9CHoRsTE5gltVWIFD232Dnqui5zqmmlYAYug4+yNAwfF64IlHGsSgRecN5BbuCTCRM5XR09ig/0XA2RUSpPfLDtQt+1a7VcgM6nXf8T8hjkA2J6qTz2W0M5dLor9jRIFZ7Ovp+TosyjLAOUxzJ1dJropeKHI5vz6v4PY1qFx4ieozySCe4DdOxMDSzjRqdTBOwQkfbdggtennnmR6OrR2XP78I8po/DF9DUa+l10UP0WEQKc4FEVOwxwfnG9wzPLkmtsPIUyLJ/cPbmv9L6S3+J+QrcBsQtOUZEhq43xb8lx0RgSi0fdFhOq9N29952qKM/PkxfJ8hFEvezD5R+fLpuLa3WxEyguc/p3naiGMz8Rcpv/gSI33Gt9QBruHKukv4av7Pp7f5n5CvQDU+DBk6R1+qPJTjovdkvsf/hDSgGgkhpFdUIyGE9IpqJISQXlGNhBDSK6qREEJ6RTUSQkivqMbH8tffF+P7coS8jWrMYmcC2BdY/UuyYkdnXO3C2Z0zvvbVSzftpPDCchP++HlcfJmeZ0/5z3yvzuenv/cPb8TNZipNNbT1Wqh/chqqUcdW3IfW04umfcmiBE/shKkfmrEzYlxDdx0gKt+e8uP4YLbMGaBc3y56mHXzyWl0mLWU9WGt/smZrFPMws66TCtz05zappkJ+Y5fm/uZ5+1OF03jMmUN5saGZQsbncWXccT6dn4/k5dJF5V3Rc+W0V4/jtT2lF8XxHia29nrCVap+i+oH5wbCz4gH96XhfpD3sRmbgwuPcqf860/1nOuqNT8a7BBQybaq9Q/ORXzBw5XIgNEa5HjXaWF+2woVWxJ9ExF24aJY3FNe54wqkSjOr5eHY6N8oROZDqO/7wRK+Qn8skQXTN31z4senbeq/O37QCpj1rLj/Ns/Sv5Msf5z+hYQV22pNt6c9dF29hXzrL/7HDczzV2y4uF52+pv3C+tJa/KyO9mv+EoI4je5Km1j85Edn4jvX0PINt1M13atuI5A4cE+YV5V071uaZmDlHFGmY7XNFbw+F8rsOE9WbBXUT5n8ViJZ0lCu6Hm4KSznRYddjVwL/lvyntavw/A31V86fcFz0GspX9a+gR+HkZmRDojpU3DPX00s7+ZH16vS0laXjoMNEZUejNz4Jl55KO1lgv0L0msufFb2AC9YTLFPxX030GuqvJX+3PdMr+Jei9wjchmkkT15PD8Oh99ark+GHlrYiedaiPDvUdrbBPZ/SGu91otdafgjM1r9yQ1rzdfZ6gkUa/Bf5XBne1uqvTfTWa9ibRu3msIOa/wQn/mHbIp/AbdgIwVdIMNx06TLkTAgqNfwyYGEjeqh0pB2/424adzOD7Thr3kwnMvlPGz3Or33zae3uWAjOaD97H/lypZwfWbSUX4smEOXcsZ5gjrL/AG44wbU3kWy+/lrzZ4XI2dPyv0vNvxYXNJwltOQwqvGxtHT6nmkqPzq9ItzfBESxVVC/hdyXX+R2VCP5cqLh4pcQjib2Pr54PIzynoRqJISQXlGNhBDSK6qxC/779z9CvgatDZNLUI1doDUsQp6K1obJJajGLtAaFiFPRWvD5BJUIyGE9IpqJISQXlGNhBDSK6qREEJ6RTUSQkivqEZCCOkV1UgIIb2iGgkhpFdUIyGE9IpqJISQXlGNhBDSK6qREEJ6RTUSQkivqEZCCOkV1UgIIb2iGgkhpFdU42PBTyD29tOAT+TpfmY7IG+gGrNEP7j8u/4GKxrhanc/43dyo4yvfd9viPqy3febpe7Hwzc/lt6a/i44/3m//l9jv3/z+cNvy9bb3dX+Iw9HNerY3+7UG1t654VAnSoS+HX65fyD/Y3U+0RIynfn9WzHLHbKWvpx0rq8gz3+PSd/1/mPPJ71R5Zj0RKbvxsun0MyjSbfKAe5w5q79LhJK/O+6BihDCLFH7ONH19uTbfXn4zou/RfI/67yjBOppO5YxEhT2OcPqATBulj0ilr6adhznsoyrvLv5n8mZvicm6t7b3pP9/+ce5xMjfgTR4r5a/VP7kT8wcR3LytBERr0a/ku19pD/fZUPwl94LoIZKzDckci2tuoko0qvk1GybTYO0+4fEVRIjNcf4zOklQlpZ0m293XfhmX7QxRHlGJ1pFHB1wPTf2tUP55fq19Aaq/hXED/ujqLv8W8ufnn6C/wDybAQLfUV86P41abXyleuf3IxsTK4D2KgPHcNUEu6EUaeoip5rXGpaCYihE9jBiJu9I+JunO7nkUa7r9EgbzivgA6/doJ6Ohp1dD2IyNK5zLHuuJjAF8Z38fmDRh+da91/8XUtvUqrf1GOI/UHrvSvp54/VfTe9p9DzZOnUv5S/ZO7kQ2IyGSHAJNsY6iRRn/FhoLOtFeI2klFbsAQI9sAK5iOj+Ozd3olva1T5kBnNT4d1/2j89U65VmdtoIqGEe4yL8t+VP3Oct/rXW+KV+l/snduA1ToRg62kpF5WoCVmgo28YmAhruIxEH7nT7owkMB3B3XO6Uc24IrSOCHDQ6lDEQ9Vp6S6fMYv1mIml35x/c8531fPBVGBlIJBt1mmL6GaBuavWSr7/r/duSPznPtl5O8l+hzovlq9Y/uRm3gYrxQyDbwPy24L/siAgabdsXHbjjIa3eeHMcvUNi+D6joS95CztBOR3X9HZ7bdOg/edW4QvPAcEe7efAx9qDdmx7H9bS30QXi5R8/V3t33L+fL5Sgny+5T/9/GE7rJW/Wv/kTlTjY0Hj4R3ybOTRxHM74NPzR74M1UgIIb2iGgkhpFdUIyF/A/sse31Ot2X7/JJ8PaqREEJ6RTV2w3///kdIl2jtnTShGrtBayyE9IDW3kkTqrFK23tdn8PnT2sshPTAk/vfw4kN9k315SFu7p04vKy5nax+Ff7Fzvb38/L5szM7qo1lz4urz6T8Xlvsn/3+vZp321e+/ti+Qd4/H8PN9rrJ58EHP10mtCl8IsrDNVsbxTn5Mw3jW0UPMxqC2TIpmn/2+PdqavWnRT0g3k+pP7bvgOe17xtXnpGNtmlkIH+XKTNwvbVS+U9cbw1TBvONR/dP3b9J/k3eJR3nk/0l/+Y4zDtNzxH5F+XP3dX1/Gkil1KqP7bv0P8Pbd/3RXvBB3fRyJZw9C4jx3G9tVz5cM1z1luTTqF3mLx/av7dDJdtJ3INFO3GlBvpdnURdx6cw5cBayFGjRnHG+HznzURuxvko9Z+ctTqtyWd7Rtt95bphsGHquiVO1QZON4rvbkTRJVQT4dTIycZp6qVW8mf2ii0czXcADaoefJUym+uF6cfFD0rQLlIJe+fon9xTmW4jI5jG2joKzR2t+9yTpuntWwraV7W/GmidDUt7SdPpX4r6WzfQnmUchrBh4ojVIcegeutJeVDYzYCEi5NlJa3FSswuuiV/FP0L875jujZDlH3ZT5/oypSZ1Pyzy7YvpPytbfvh4ke11urUmgUxfJZvxuhctd/b701NDDND2X/1PxbHd56X5njtqLnh2trfW4p528jUPb6vxu7xnIel09tH8D2XWGTp5Vz2jfabtLOrsAXvLZenu7MFGQax2qNguut3bXemna3LPmnxb/oKMUvMgDaizsWx/nzSl4G6Wh+X9NJ0CmWZ0CF/AFNpMLIoVZ/2vEppesLvqxs3+D09u1uSvqjmVNRjQmmwad3+kfx9PzdDDpNcMPqof40kToLtu9ncPzLu92oRvLl9NxJNOHag3ZO8mHui/KAaiTk0WhiVkM7D/mTqEbiwR3IP6dQ2T7fIeRr+JvtWzX2Re1/7RhCSK+oxr4oCRtFj5C/hmrsC4oeIWRFNT6W2vtcKhQ9QsiKaswSvWBqX3IUe/jyoWe3OFWIr73jnR6KHiFkRTXq+OkkSloagUGgTn3RcAynwOBlTYoeIeQQMm0pjcyW9cfcNJXlc0hmCkt+CJqfu1gD5zwsohQ9QsiK+YMILpq2JCBai97qd29Nh/tscPvob1YXRA+RnBNSWasrjSpNdDdjft/8msZ1Ha8mKHqEkBXZwIRhCIyN+qxoGYFKxasqepjUfORlRoihE9hBhq7h80Jt/13DZ4oeIWRFNiSqg2hNso2lq9Poryh6Min61Od4AanIYb2u5i9KKHqEkBW3YYaXGDpaIcFQUxOwguhtn+OJgIb7FIe3FfBMEaut+ueJ+d9YUKDoEUJW3AYEbVnfKhhuunT/ZUdEEAm2fdHh1+U6Pp/v0BcaFD1CiOXf6/99gulfzqy0SgAAAABJRU5ErkJggg==" alt="2"></p><ol start="2"><li>开启ssh代理</li></ol><hr><p>window电脑
看 git 中的笔记</p><h3 id="在服务器上生成秘钥"><a href="#在服务器上生成秘钥" aria-hidden="true" class="header-anchor">#</a> 在服务器上生成秘钥</h3><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#生成秘钥</span>
ssh-keygen -t rsa -b 4096 -C <span class="token string">&quot;xxx@xx.com&quot;</span>

<span class="token punctuation">..</span>.<span class="token punctuation">(</span>yes<span class="token punctuation">)</span>
<span class="token comment"># 开启代理</span>
<span class="token function">eval</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>ssh-agent -s<span class="token variable">)</span></span>&quot;</span>

<span class="token comment"># 加入代理 </span>
ssh-add  ~/.ssh/id_rsa


<span class="token comment"># 进入.ssh 目录下</span>
<span class="token comment"># 授权钥匙  -- 生成一个授权文件</span>
<span class="token comment">## 进入后直接 wq!  主要是生成这个文件</span>
<span class="token function">vi</span> authorized_keys 

</code></pre></div><p><img src="'./images/ssh_3peirzhi.png" alt="3"></p><p>vi命令</p><ul><li>q! 退出</li><li>wq! 保存退出</li></ul><h3 id="把-本地公钥-添加到服务器"><a href="#把-本地公钥-添加到服务器" aria-hidden="true" class="header-anchor">#</a> 把 本地公钥 添加到服务器</h3><p>进入服务器的<code>authorized_keys</code>  文件<br>
把本地生成的公钥 <code>id_rsa.pub</code> 添加进入<code>authorized_keys</code>
此时服务器上就已经持有某台电脑的公钥了 ，这台电脑就可以不用密码登录了， 但还有需要配置</p><p>修改 authorized_keys 的权限</p><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">chmod</span> 600 authorized_keys

<span class="token comment"># 重启 ssh</span>
<span class="token function">sudo</span> <span class="token function">service</span> <span class="token function">ssh</span> restart

</code></pre></div><p>通过这样配置就可以进ssh 无密码登录，
关键点是给服务器的 <code>authorized_keys</code> 添加 电脑的公钥进取，
如果我们使用的是 xshell 或者putty 进行管理 也需要给服务器配置 authorized_keys
以及给软件配置或者生产私钥</p><p><a href="http://www.aiezu.com/system/linux/xshell_ssh_public-key_login.html" target="_blank" rel="noopener noreferrer">Xshell配置ssh免密码登录-密钥公钥(Public key)与私钥(Private Key)登录<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><h3 id="如果多个人需要多个公钥呢"><a href="#如果多个人需要多个公钥呢" aria-hidden="true" class="header-anchor">#</a> 如果多个人需要多个公钥呢</h3><p><strong>手动追加的方式</strong></p><p>注意追加前authorized_keys文件的末尾需要有个换行符。</p><p>账号A生成了id_rsa.pub_A
账号B生成了id_rsa.pub_B
把这两个都拷贝到主机上</p><p>到主机上执行：</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> id_rsa.pub_A <span class="token operator">&gt;&gt;</span> authorized_keys 
<span class="token function">cat</span> id_rsa.pub_B <span class="token operator">&gt;&gt;</span> authorized_keys 
</code></pre></div><h2 id="修改登录端口"><a href="#修改登录端口" aria-hidden="true" class="header-anchor">#</a> 修改登录端口</h2><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vi</span> /etc/ssh/sshd_config
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 端口</span>
<span class="token comment"># 0-65536 都可以用  0-1024 一般都被系统占用 不建议用</span>
port 22 

UseDNS no

·····
PasswordAuthentication <span class="token function">yes</span> <span class="token comment"># 是否允许密码登录  如果开启了ssh 就设置为no</span>
AllowUsers xxx <span class="token comment"># xxx为管理名</span>
</code></pre></div><p>然后重启
<code>sudo service ssh restart</code></p><p>修改后登录
<code>ssh -p 39999 root@111.111.111.1</code></p><h2 id="去掉默认-root-登录端口"><a href="#去掉默认-root-登录端口" aria-hidden="true" class="header-anchor">#</a> 去掉默认 root 登录端口</h2><p>比方说阿里云 默认的登录名为root给关掉</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vi</span> /etc/ssh/sshd_config
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>PermitRootLogin no <span class="token comment">#是否开启root登录  如果以及配置好多个登录账号了就设置为no </span>
PasswordAuthentication no <span class="token comment"># 是否允许密码登录  如果开启了ssh 就设置为no</span>
</code></pre></div><p><strong>iptables Fail2Ban 增强安全</strong></p><h2 id="iptables-防火墙"><a href="#iptables-防火墙" aria-hidden="true" class="header-anchor">#</a> iptables 防火墙</h2><h2 id="配置文件"><a href="#配置文件" aria-hidden="true" class="header-anchor">#</a> 配置文件</h2><hr><p>subl .zshrc</p><p>source .zshrc</p></div><div class="content edit-link"><!----><!----></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/deploy/server_node.html" class="prev">
          搭建node.js 生成环境
        </a></span><span class="next"><a href="/js/functions-of-array.html">
          数组常见方法整理
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/73.0c199081.js" defer></script><script src="/assets/js/app.fa713eac.js" defer></script>
  </body>
</html>
