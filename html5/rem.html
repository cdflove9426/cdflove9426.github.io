<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CaiCai9426 | Rem不是银弹</title>
    <meta name="description" content="菲菲Blog,陆续更新中">
    <link rel="icon" href="/logo.png">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/86.styles.1708be3a.css" as="style"><link rel="preload" href="/assets/js/app.fa713eac.js" as="script"><link rel="preload" href="/assets/js/59.b512423b.js" as="script"><link rel="prefetch" href="/assets/js/38.8baf7629.js"><link rel="prefetch" href="/assets/js/0.c7a94944.js"><link rel="prefetch" href="/assets/js/1.75bc214a.js"><link rel="prefetch" href="/assets/js/2.4a593960.js"><link rel="prefetch" href="/assets/js/3.f69ab2b6.js"><link rel="prefetch" href="/assets/js/4.b6ef39fa.js"><link rel="prefetch" href="/assets/js/5.91f53b8d.js"><link rel="prefetch" href="/assets/js/6.7ab4526d.js"><link rel="prefetch" href="/assets/js/7.262318e7.js"><link rel="prefetch" href="/assets/js/8.6b00c1b6.js"><link rel="prefetch" href="/assets/js/9.49213d30.js"><link rel="prefetch" href="/assets/js/10.194074c7.js"><link rel="prefetch" href="/assets/js/11.28772604.js"><link rel="prefetch" href="/assets/js/12.473fa971.js"><link rel="prefetch" href="/assets/js/13.e7244ca3.js"><link rel="prefetch" href="/assets/js/14.9f35604a.js"><link rel="prefetch" href="/assets/js/15.92de29ce.js"><link rel="prefetch" href="/assets/js/16.5081d0f4.js"><link rel="prefetch" href="/assets/js/17.8d7bbf3a.js"><link rel="prefetch" href="/assets/js/18.8b379100.js"><link rel="prefetch" href="/assets/js/19.e6213855.js"><link rel="prefetch" href="/assets/js/20.09855c55.js"><link rel="prefetch" href="/assets/js/21.deccda74.js"><link rel="prefetch" href="/assets/js/22.c3da8c3e.js"><link rel="prefetch" href="/assets/js/23.0f2bdda6.js"><link rel="prefetch" href="/assets/js/24.23916d1d.js"><link rel="prefetch" href="/assets/js/25.4a28d9a1.js"><link rel="prefetch" href="/assets/js/26.638f323d.js"><link rel="prefetch" href="/assets/js/27.9104930e.js"><link rel="prefetch" href="/assets/js/28.f4a9d74b.js"><link rel="prefetch" href="/assets/js/29.a4ffc45d.js"><link rel="prefetch" href="/assets/js/30.34c1be94.js"><link rel="prefetch" href="/assets/js/31.fc4459e1.js"><link rel="prefetch" href="/assets/js/32.6fa53274.js"><link rel="prefetch" href="/assets/js/33.d39ccb38.js"><link rel="prefetch" href="/assets/js/34.95667869.js"><link rel="prefetch" href="/assets/js/35.1c9f7cb6.js"><link rel="prefetch" href="/assets/js/36.c527c4dc.js"><link rel="prefetch" href="/assets/js/37.91db206d.js"><link rel="prefetch" href="/assets/js/39.2b9663c2.js"><link rel="prefetch" href="/assets/js/40.4879e3dd.js"><link rel="prefetch" href="/assets/js/41.bd45403e.js"><link rel="prefetch" href="/assets/js/42.bab6410e.js"><link rel="prefetch" href="/assets/js/43.b6bad706.js"><link rel="prefetch" href="/assets/js/44.3ef4ed34.js"><link rel="prefetch" href="/assets/js/45.4eaec123.js"><link rel="prefetch" href="/assets/js/46.89dbff86.js"><link rel="prefetch" href="/assets/js/47.ec3a4eb4.js"><link rel="prefetch" href="/assets/js/48.1483f745.js"><link rel="prefetch" href="/assets/js/49.ed95d1ac.js"><link rel="prefetch" href="/assets/js/50.1969a022.js"><link rel="prefetch" href="/assets/js/51.8ba405ec.js"><link rel="prefetch" href="/assets/js/52.d10260ca.js"><link rel="prefetch" href="/assets/js/53.4521a8db.js"><link rel="prefetch" href="/assets/js/54.9ad871d9.js"><link rel="prefetch" href="/assets/js/55.58623269.js"><link rel="prefetch" href="/assets/js/56.543fae7f.js"><link rel="prefetch" href="/assets/js/57.c5d65fc9.js"><link rel="prefetch" href="/assets/js/58.04c7d745.js"><link rel="prefetch" href="/assets/js/60.320eda07.js"><link rel="prefetch" href="/assets/js/61.5aae5d3f.js"><link rel="prefetch" href="/assets/js/62.9dfe9e13.js"><link rel="prefetch" href="/assets/js/63.25b34838.js"><link rel="prefetch" href="/assets/js/64.d12d5002.js"><link rel="prefetch" href="/assets/js/65.42b15a91.js"><link rel="prefetch" href="/assets/js/66.cfed3a8a.js"><link rel="prefetch" href="/assets/js/67.1a3b15e5.js"><link rel="prefetch" href="/assets/js/68.9868ce12.js"><link rel="prefetch" href="/assets/js/69.2903063c.js"><link rel="prefetch" href="/assets/js/70.9b5ebefd.js"><link rel="prefetch" href="/assets/js/71.4d376bf0.js"><link rel="prefetch" href="/assets/js/72.c26dd68c.js"><link rel="prefetch" href="/assets/js/73.0c199081.js"><link rel="prefetch" href="/assets/js/74.a575f917.js"><link rel="prefetch" href="/assets/js/75.3bb9db7f.js"><link rel="prefetch" href="/assets/js/76.77eed2ca.js"><link rel="prefetch" href="/assets/js/77.f9cdb120.js"><link rel="prefetch" href="/assets/js/78.81eb4ea8.js"><link rel="prefetch" href="/assets/js/79.bdfedc4c.js"><link rel="prefetch" href="/assets/js/80.80a3c0e7.js"><link rel="prefetch" href="/assets/js/81.1e44050b.js"><link rel="prefetch" href="/assets/js/82.6ac951ca.js"><link rel="prefetch" href="/assets/js/83.9eec4ec5.js"><link rel="prefetch" href="/assets/js/84.43236687.js"><link rel="prefetch" href="/assets/js/85.b06d6363.js">
    <link rel="stylesheet" href="/assets/css/86.styles.1708be3a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      CaiCai9426
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/deploy/jenkins_cicl.html#jenkins" class="nav-link">blog</a></div><div class="nav-item"><a href="/project/" class="nav-link">项目</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/deploy/jenkins_cicl.html#jenkins" class="nav-link">blog</a></div><div class="nav-item"><a href="/project/" class="nav-link">项目</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>vue文档</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/vue/axios-x.html" class="sidebar-link">axios 封装</a></li><li><a href="/vue/axios.html" class="sidebar-link">axios </a></li><li><a href="/vue/compent.html" class="sidebar-link">基于Vue的组件库</a></li><li><a href="/vue/elementUi_table.html" class="sidebar-link">elementUi_table</a></li><li><a href="/vue/vue-all.html" class="sidebar-link">vue 记录</a></li><li><a href="/vue/vue-auth.html" class="sidebar-link">vue 权限控制</a></li><li><a href="/vue/vue-count-to.html" class="sidebar-link">vue-count-to</a></li><li><a href="/vue/vue-deploy.html" class="sidebar-link">vue项目部署</a></li><li><a href="/vue/vue-router.html" class="sidebar-link">Vue-router 路由的基本使用 以及优雅使用keep-alive</a></li><li><a href="/vue/vue-youhua.html" class="sidebar-link">Vue 项目优化</a></li><li><a href="/vue/vue_expend_excel.html" class="sidebar-link">导出信息为excel文件</a></li><li><a href="/vue/vue_mark_scroll.html" class="sidebar-link">vue 移动端屏蔽滑动的遮罩层</a></li><li><a href="/vue/vue_props.html" class="sidebar-link">vue 父子组件时间传递</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>部署</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>JS文档</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>gulp文档</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>git相关文档</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Webpack</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CSS</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="rem不是银弹"><a href="#rem不是银弹" aria-hidden="true" class="header-anchor">#</a> Rem不是银弹</h1><p>rem是弹性布局的一种实现方式，弹性布局可以算作响应式布局的一种，但响应式布局不是弹性布局，弹性布局强调等比缩放，100%还原；响应式布局强调不同屏幕要有不同的显示，比如媒体查询</p><p>rem可以做到100%的还原度，但使用rem还有一些问题，下面我们一一列举下：</p><p>（对iphone6而言：原先的375×667，就会变成750×1334）
设备像素比 = 物理像素 / 设备独立像素
javascript中，可以通过<code>window.devicePixelRatio</code>获取到当前设备的dpr。</p><p>理论上，1个位图像素对应于1个物理像素，图片才能得到完美清晰的展示。</p><p>在普通屏幕下是没有问题的，但是在retina屏幕下就会出现位图像素点不够，从而导致图片模糊的情况。
<img src="/assets/img/rem_dpr_20180622175015.809c10a5.jpg" alt="retina屏幕下就会出现位图像素点不">
对于dpr=2的retina屏幕而言，1个位图像素对应于4个物理像素，由于单个位图像素不可以再进一步分割，所以只能就近取色，从而导致图片模糊</p><p>首先是字体的问题，字体大小并不能使用rem，字体的大小和字体宽度，并不成线性关系，所以字体大小不能使用rem；由于设置了根元素字体的大小，会影响所有没有设置字体大小的元素，因为字体大小是会继承的，</p><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">html</span> <span class="token punctuation">{</span><span class="token property">fons-size</span><span class="token punctuation">:</span> width / 100<span class="token punctuation">}</span>
<span class="token selector">body</span> <span class="token punctuation">{</span><span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">}</span> 
</code></pre></div><p><strong>可以通过修改body字体的大小来实现，同时所有设置字体大小的地方都是用em单位</strong></p><div class="language-css extra-class"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@media</span> screen and <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 320px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
	<span class="token selector">body</span> <span class="token punctuation">{</span><span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> screen and <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 481px<span class="token punctuation">)</span> and <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span>640px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
	<span class="token selector">body</span> <span class="token punctuation">{</span><span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> screen and <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 641px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
	<span class="token selector">body</span> <span class="token punctuation">{</span><span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">p</span> <span class="token punctuation">{</span><span class="token property">font-size</span><span class="token punctuation">:</span> 1.2em<span class="token punctuation">}</span>
<span class="token selector">p a</span> <span class="token punctuation">{</span><span class="token property">font-size</span><span class="token punctuation">:</span> 1.2em<span class="token punctuation">}</span>
</code></pre></div><p><strong>在PC端浏览，页面过宽?</strong></p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> clientWidth <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
clientWidth <span class="token operator">=</span> clientWidth <span class="token operator">&lt;</span> <span class="token number">780</span> <span class="token operator">?</span> clientWidth <span class="token punctuation">:</span> <span class="token number">780</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> clientWidth <span class="token operator">/</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 100rem <span class="token punctuation">}</span> 
</code></pre></div><h1 id="整合-rem布局方案"><a href="#整合-rem布局方案" aria-hidden="true" class="header-anchor">#</a> 整合 Rem布局方案</h1><p>rem+js方案  解决字体问题，解决屏幕过宽问题</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1, maximum-scale=1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>rem布局<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">html</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span> <span class="token comment">/* 320/10 */</span>
<span class="token punctuation">}</span>
<span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span> <span class="token comment">/* 修正字体大小 */</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token comment">/* width: 10rem; */</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@media</span> screen and <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 320px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token selector">body</span> <span class="token punctuation">{</span><span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> screen and <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 481px<span class="token punctuation">)</span> and <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span>640px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token selector">body</span> <span class="token punctuation">{</span><span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> screen and <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 641px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token selector">body</span> <span class="token punctuation">{</span><span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> documentElement <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">recalc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> clientWidth <span class="token operator">=</span> documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
    <span class="token comment">// 屏幕宽度大于780，不在放大</span>
    clientWidth <span class="token operator">=</span> clientWidth <span class="token operator">&lt;</span> <span class="token number">780</span> <span class="token operator">?</span> clientWidth <span class="token punctuation">:</span> <span class="token number">780</span><span class="token punctuation">;</span>
    documentElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> clientWidth <span class="token operator">/</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> recalc<span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'orientationchange'</span> <span class="token keyword">in</span> window <span class="token operator">?</span> <span class="token string">'orientationchange'</span> <span class="token punctuation">:</span> <span class="token string">'resize'</span><span class="token punctuation">,</span> recalc<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// 或者</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>doc<span class="token punctuation">,</span> win<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> docEl <span class="token operator">=</span> doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
      <span class="token keyword">var</span> resizeEvt <span class="token operator">=</span> <span class="token string">'orientationchange'</span> <span class="token keyword">in</span> window <span class="token operator">?</span> <span class="token string">'orientationchange'</span> <span class="token punctuation">:</span> <span class="token string">'resize'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">recalc</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> clientWidth <span class="token operator">=</span> docEl<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>clientWidth<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
          docEl<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token number">20</span> <span class="token operator">*</span> <span class="token punctuation">(</span>clientWidth <span class="token operator">/</span> <span class="token number">375</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>doc<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      win<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>resizeEvt<span class="token punctuation">,</span> recalc<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      doc<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> recalc<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> window<span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre></div><h1 id="设备像素比"><a href="#设备像素比" aria-hidden="true" class="header-anchor">#</a> 设备像素比</h1><p>这种方式已经足够页面的开发布局，
可是要是想把页面做的更加高级，适配上屏幕的设备像素比</p><p>多屏适配布局问题
移动端布局，为了适配各种大屏手机，目前最好用的方案莫过于使用相对单位rem。</p><p>基于rem的原理，我们要做的就是: 针对不同手机屏幕尺寸和dpr动态的改变根节点html的font-size大小(基准值)。</p><div class="language-js extra-class"><pre class="language-js"><code>rem <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">*</span> dpr <span class="token operator">/</span> <span class="token number">10</span>
</code></pre></div><p>rem
除以10，是为了取整，方便计算(理论上可以是任何值)
iphone4/5: 320px * 2 / 10 = 64px</p><p>iphone6: 375px * 2 / 10 = 75px</p><p>所以 iphone6 的设计稿为 750×1334
如果设计稿一个div 的宽为300px
css的写法就是  300/75 =4rem</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> dpr<span class="token punctuation">,</span> rem<span class="token punctuation">,</span> scale<span class="token punctuation">;</span>
<span class="token keyword">var</span> docEl <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
<span class="token keyword">var</span> fontEl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> metaEl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'meta[name=&quot;viewport&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

dpr <span class="token operator">=</span> window<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">;</span>
rem <span class="token operator">=</span> docEl<span class="token punctuation">.</span>clientWidth <span class="token operator">*</span> dpr <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>
scale <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> dpr<span class="token punctuation">;</span>


<span class="token comment">// 设置viewport，进行缩放，达到高清效果</span>
metaEl<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">,</span> <span class="token string">'width='</span> <span class="token operator">+</span> dpr <span class="token operator">*</span> docEl<span class="token punctuation">.</span>clientWidth <span class="token operator">+</span> <span class="token string">',initial-scale='</span> <span class="token operator">+</span> scale <span class="token operator">+</span> <span class="token string">',maximum-scale='</span> <span class="token operator">+</span> scale <span class="token operator">+</span> <span class="token string">', minimum-scale='</span> <span class="token operator">+</span> scale <span class="token operator">+</span> <span class="token string">',user-scalable=no'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 设置data-dpr属性，留作的css hack之用</span>
docEl<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-dpr'</span><span class="token punctuation">,</span> dpr<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 动态写入样式</span>
docEl<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>fontEl<span class="token punctuation">)</span><span class="token punctuation">;</span>
fontEl<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'html{font-size:'</span> <span class="token operator">+</span> rem <span class="token operator">+</span> <span class="token string">'px!important;}'</span><span class="token punctuation">;</span>

<span class="token comment">// 给js调用的，某一dpr下rem和px之间的转换函数</span>
window<span class="token punctuation">.</span><span class="token function-variable function">rem2px</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    v <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> v <span class="token operator">*</span> rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function-variable function">px2rem</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    v <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> v <span class="token operator">/</span> rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span>dpr <span class="token operator">=</span> dpr<span class="token punctuation">;</span>
window<span class="token punctuation">.</span>rem <span class="token operator">=</span> rem<span class="token punctuation">;</span>
</code></pre></div><p>自动适配版</p><div class="language-js extra-class"><pre class="language-js"><code> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>doc<span class="token punctuation">,</span> win<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> dpr<span class="token punctuation">,</span> rem<span class="token punctuation">,</span> scale<span class="token punctuation">;</span>
      <span class="token keyword">var</span> docEl <span class="token operator">=</span> doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
      <span class="token keyword">var</span> fontEl <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> metaEl <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'meta[name=&quot;viewport&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// var clineWidth = docEl.clientWidth;</span>
      <span class="token keyword">var</span> resizeEvt <span class="token operator">=</span> <span class="token string">'orientationchange'</span> <span class="token keyword">in</span> window <span class="token operator">?</span> <span class="token string">'orientationchange'</span> <span class="token punctuation">:</span> <span class="token string">'resize'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">recalc</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// console.log('----recalc',&quot;docEl.clientWidth&quot;,docEl.clientWidth);</span>
          <span class="token comment">// console.log('----window.screen.width',&quot;window.screen.width&quot;,window.screen.width);</span>
          dpr <span class="token operator">=</span> win<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">;</span>
          rem <span class="token operator">=</span> win<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">*</span> dpr <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">//clientWidth 在这里不合适 ，如果文档已经被缩放了那clientWidth 也就被了</span>
          scale <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> dpr<span class="token punctuation">;</span>

          <span class="token comment">// 设置viewport，进行缩放，达到高清效果</span>
          metaEl<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">,</span> <span class="token string">'width='</span> <span class="token operator">+</span> dpr <span class="token operator">*</span> win<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token string">',initial-scale='</span> <span class="token operator">+</span> scale <span class="token operator">+</span>
            <span class="token string">',maximum-scale='</span> <span class="token operator">+</span> scale <span class="token operator">+</span> <span class="token string">', minimum-scale='</span> <span class="token operator">+</span> scale <span class="token operator">+</span> <span class="token string">',user-scalable=no'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token comment">// 设置data-dpr属性，留作的css hack之用</span>
          docEl<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-dpr'</span><span class="token punctuation">,</span> dpr<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">// 动态写入样式</span>
          <span class="token comment">// docEl.firstElementChild.appendChild(fontEl);</span>
          <span class="token comment">// fontEl.innerHTML = 'html{font-size:' +  rem + 'px!important;}';</span>
          docEl<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> rem <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
          <span class="token comment">// 给js调用的，某一dpr下rem和px之间的转换函数</span>
          win<span class="token punctuation">.</span><span class="token function-variable function">rem2px</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            v <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> v <span class="token operator">*</span> rem<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
          win<span class="token punctuation">.</span><span class="token function-variable function">px2rem</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            v <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> v <span class="token operator">/</span> rem<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>

          win<span class="token punctuation">.</span>dpr <span class="token operator">=</span> dpr<span class="token punctuation">;</span>
          win<span class="token punctuation">.</span>rem <span class="token operator">=</span> rem<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>doc<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      win<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>resizeEvt<span class="token punctuation">,</span> recalc<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      doc<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> recalc<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> window<span class="token punctuation">)</span>
</code></pre></div><p>因为这个方案同时解决了三个问题：</p><ul><li>border: 1px问题</li><li>图片高清问题</li><li>屏幕适配布局问题</li></ul><p><strong>rem单位计算</strong>
rem = px / 基准值;</p><p>4rem = 300px/75</p><p>width: 10rem; // -&gt; 750px
height: 4rem; // -&gt; 300px
因为dpr为2，页面scale了0.5，所以在手机屏幕上显示的真实宽高应该是375×150px</p><p>通过less  ,sass 或者stylu 等工具减少我们的运算</p><h1 id="字体大小问题"><a href="#字体大小问题" aria-hidden="true" class="header-anchor">#</a> 字体大小问题</h1><p>对于页面区块的宽高，我们可以依赖高清视觉稿，但是如果字体也通过rem来设置的话 ，就不会那么美观了
对于字体缩放问题，设计师原本的要求是这样的：<strong>任何手机屏幕上字体大小都要统一</strong> 实际上也确实是这样才美观</p><p>我们也会用less写一个mixin：</p><div class="language-css extra-class"><pre class="language-css"><code>.<span class="token function">px2px</span><span class="token punctuation">(</span><span class="token atrule"><span class="token rule">@name</span>, <span class="token rule">@px</span><span class="token punctuation">)</span></span><span class="token punctuation">{</span>
    <span class="token selector">@</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">:</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token atrule"><span class="token rule">@px</span> / 2<span class="token punctuation">)</span> * 1px<span class="token punctuation">;</span></span>
    <span class="token selector">[data-dpr=&quot;2&quot;] &amp;</span> <span class="token punctuation">{</span>
        <span class="token selector">@</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@px</span> * 1px<span class="token punctuation">;</span></span>
    <span class="token punctuation">}</span>
    <span class="token selector">// for mx3
    [data-dpr=&quot;2.5&quot;] &amp;</span> <span class="token punctuation">{</span>
        <span class="token selector">@</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">:</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token atrule"><span class="token rule">@px</span> * 2.5 / 2<span class="token punctuation">)</span> * 1px<span class="token punctuation">;</span></span>
    <span class="token punctuation">}</span>
    <span class="token selector">// for 小米note
    [data-dpr=&quot;2.75&quot;] &amp;</span> <span class="token punctuation">{</span>
        <span class="token selector">@</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">:</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token atrule"><span class="token rule">@px</span> * 2.75 / 2<span class="token punctuation">)</span> * 1px<span class="token punctuation">;</span></span>
    <span class="token punctuation">}</span>
    <span class="token selector">[data-dpr=&quot;3&quot;] &amp;</span> <span class="token punctuation">{</span>
        <span class="token selector">@</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">:</span> <span class="token function">round</span><span class="token punctuation">(</span>@px / 2 * 3<span class="token punctuation">)</span> * 1px
    <span class="token punctuation">}</span>
    <span class="token selector">// for 三星note4
    [data-dpr=&quot;4&quot;] &amp;</span> <span class="token punctuation">{</span>
        <span class="token selector">@</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@px</span> * 2px<span class="token punctuation">;</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="http://www.html-js.com/article/Mobile-terminal-H5-mobile-terminal-HD-multi-screen-adaptation-scheme%203041" target="_blank" rel="noopener noreferrer">移动端高清、多屏适配方案<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><h1 id="自己整合了一份"><a href="#自己整合了一份" aria-hidden="true" class="header-anchor">#</a> 自己整合了一份</h1><p>虽然用起来也是挺舒服的，样式也很清晰，不过要看情况，
微信端，因为放大视图的问题，长按二维码好像会有问题
同时因为放大的问题，一些组建用进来需要改样式，在开发时间比较紧的时候比较麻烦。
保存着 日后跟进</p><div class="language-css extra-class"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@function</span> <span class="token function">px2rem</span><span class="token punctuation">(</span>$px, $<span class="token property">base-font-size</span><span class="token punctuation">:</span> 75px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token atrule"><span class="token rule">@if</span> <span class="token punctuation">(</span><span class="token function">unitless</span><span class="token punctuation">(</span>$px<span class="token punctuation">)</span><span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token atrule"><span class="token rule">@warn</span> &quot;Assuming #</span><span class="token punctuation">{</span>$px<span class="token punctuation">}</span> to be in pixels, attempting to convert it into pixels for you&quot;<span class="token punctuation">;</span>
    <span class="token atrule"><span class="token rule">@return</span> <span class="token function">px2rem</span><span class="token punctuation">(</span>$px + 0px<span class="token punctuation">)</span><span class="token punctuation">;</span></span> // That may fail.
  <span class="token punctuation">}</span> <span class="token atrule"><span class="token rule">@else</span> if <span class="token punctuation">(</span><span class="token function">unit</span><span class="token punctuation">(</span>$px<span class="token punctuation">)</span> == rem<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token atrule"><span class="token rule">@return</span> $px<span class="token punctuation">;</span></span>
  <span class="token punctuation">}</span>
  <span class="token atrule"><span class="token rule">@return</span> <span class="token punctuation">(</span>$px / $base-font-size<span class="token punctuation">)</span> * 1rem<span class="token punctuation">;</span></span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@function</span> <span class="token function">px2em</span><span class="token punctuation">(</span>$px, $<span class="token property">base-font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token atrule"><span class="token rule">@if</span> <span class="token punctuation">(</span><span class="token function">unitless</span><span class="token punctuation">(</span>$px<span class="token punctuation">)</span><span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token atrule"><span class="token rule">@warn</span> &quot;Assuming #</span><span class="token punctuation">{</span>$px<span class="token punctuation">}</span> to be in pixels, attempting to convert it into pixels for you&quot;<span class="token punctuation">;</span>
    <span class="token atrule"><span class="token rule">@return</span> <span class="token function">px2em</span><span class="token punctuation">(</span>$px + 0px<span class="token punctuation">)</span><span class="token punctuation">;</span></span> // That may fail.
  <span class="token punctuation">}</span> <span class="token atrule"><span class="token rule">@else</span> if <span class="token punctuation">(</span><span class="token function">unit</span><span class="token punctuation">(</span>$px<span class="token punctuation">)</span> == em<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token atrule"><span class="token rule">@return</span> $px<span class="token punctuation">;</span></span>
  <span class="token punctuation">}</span>
  <span class="token atrule"><span class="token rule">@return</span> <span class="token punctuation">(</span>$px / $base-font-size<span class="token punctuation">)</span> * 1em<span class="token punctuation">;</span></span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>doc<span class="token punctuation">,</span> win<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> dpr<span class="token punctuation">,</span> rem<span class="token punctuation">,</span> scale<span class="token punctuation">;</span>
      <span class="token keyword">var</span> docEl <span class="token operator">=</span> doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
      <span class="token keyword">var</span> defineFontSize <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> maxWidthScreen <span class="token operator">=</span> <span class="token number">780</span><span class="token punctuation">;</span> <span class="token comment">//设备最大宽度</span>

      <span class="token keyword">var</span> metaEl <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'meta[name=&quot;viewport&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// var clineWidth = docEl.clientWidth;</span>
      <span class="token keyword">function</span> <span class="token function">getfonesize</span><span class="token punctuation">(</span>_screenWidth<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_screenWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>_screenWidth <span class="token operator">&gt;=</span><span class="token number">640</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token number">36</span> <span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>_screenWidth <span class="token operator">&gt;=</span><span class="token number">640</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token number">30</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>_screenWidth <span class="token operator">&gt;=</span><span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token number">28</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>_screenWidth <span class="token operator">&gt;=</span><span class="token number">540</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token number">26</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>_screenWidth <span class="token operator">&gt;=</span><span class="token number">480</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token number">24</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>_screenWidth <span class="token operator">&gt;=</span><span class="token number">410</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token number">22</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>_screenWidth <span class="token operator">&gt;=</span><span class="token number">375</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token number">20</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>_screenWidth <span class="token operator">&gt;=</span><span class="token number">350</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token number">18</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>_screenWidth <span class="token operator">&gt;=</span><span class="token number">320</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token number">16</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">var</span> resizeEvt <span class="token operator">=</span> <span class="token string">'orientationchange'</span> <span class="token keyword">in</span> window <span class="token operator">?</span> <span class="token string">'orientationchange'</span> <span class="token punctuation">:</span> <span class="token string">'resize'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">recalc</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// console.log('----recalc',&quot;docEl.clientWidth&quot;,docEl.clientWidth);</span>
          <span class="token comment">// console.log('----window.screen.width',&quot;window.screen.width&quot;,window.screen.width);</span>

          <span class="token keyword">let</span>  screenWidth <span class="token operator">=</span>  win<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width<span class="token punctuation">;</span> <span class="token comment">//设备宽度</span>
          defineFontSize <span class="token operator">=</span> <span class="token function">getfonesize</span><span class="token punctuation">(</span>screenWidth<span class="token punctuation">)</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>screenWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
          screenWidth <span class="token operator">=</span> screenWidth<span class="token operator">&gt;</span>maxWidthScreen <span class="token operator">?</span>  maxWidthScreen <span class="token punctuation">:</span> screenWidth<span class="token punctuation">;</span>
          dpr <span class="token operator">=</span> win<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">;</span>
          rem <span class="token operator">=</span> screenWidth <span class="token operator">*</span> dpr <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">//clientWidth 在这里不合适 ，如果文档已经被缩放了那clientWidth 也就被了</span>
          scale <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> dpr<span class="token punctuation">;</span>

          <span class="token comment">// 设置viewport，进行缩放，达到高清效果</span>
          metaEl<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">,</span> <span class="token string">'width='</span> <span class="token operator">+</span> dpr <span class="token operator">*</span> screenWidth <span class="token operator">+</span> <span class="token string">',initial-scale='</span> <span class="token operator">+</span> scale <span class="token operator">+</span>
            <span class="token string">',maximum-scale='</span> <span class="token operator">+</span> scale <span class="token operator">+</span> <span class="token string">', minimum-scale='</span> <span class="token operator">+</span> scale <span class="token operator">+</span> <span class="token string">',user-scalable=no'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token comment">// 设置data-dpr属性，留作的css hack之用</span>
          docEl<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-dpr'</span><span class="token punctuation">,</span> dpr<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">// 动态写入样式</span>
          docEl<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> rem <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
          doc<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> defineFontSize<span class="token operator">*</span>dpr <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
          doc<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> screenWidth<span class="token operator">*</span>dpr <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>

          <span class="token comment">// 给js调用的，某一dpr下rem和px之间的转换函数</span>
          win<span class="token punctuation">.</span><span class="token function-variable function">rem2px</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            v <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> v <span class="token operator">*</span> rem<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
          win<span class="token punctuation">.</span><span class="token function-variable function">px2rem</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            v <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> v <span class="token operator">/</span> rem<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>

          win<span class="token punctuation">.</span>dpr <span class="token operator">=</span> dpr<span class="token punctuation">;</span>
          win<span class="token punctuation">.</span>rem <span class="token operator">=</span> rem<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>doc<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      win<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>resizeEvt<span class="token punctuation">,</span> recalc<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      doc<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> recalc<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> window<span class="token punctuation">)</span>
</code></pre></div></div><div class="content edit-link"><!----><!----></div><!----></div></div></div>
    <script src="/assets/js/59.b512423b.js" defer></script><script src="/assets/js/app.fa713eac.js" defer></script>
  </body>
</html>
