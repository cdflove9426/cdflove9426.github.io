<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CaiCai9426 | axios </title>
    <meta name="description" content="菲菲Blog,陆续更新中">
    <link rel="icon" href="/logo.png">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/86.styles.1708be3a.css" as="style"><link rel="preload" href="/assets/js/app.fa713eac.js" as="script"><link rel="preload" href="/assets/js/25.4a28d9a1.js" as="script"><link rel="prefetch" href="/assets/js/38.8baf7629.js"><link rel="prefetch" href="/assets/js/0.c7a94944.js"><link rel="prefetch" href="/assets/js/1.75bc214a.js"><link rel="prefetch" href="/assets/js/2.4a593960.js"><link rel="prefetch" href="/assets/js/3.f69ab2b6.js"><link rel="prefetch" href="/assets/js/4.b6ef39fa.js"><link rel="prefetch" href="/assets/js/5.91f53b8d.js"><link rel="prefetch" href="/assets/js/6.7ab4526d.js"><link rel="prefetch" href="/assets/js/7.262318e7.js"><link rel="prefetch" href="/assets/js/8.6b00c1b6.js"><link rel="prefetch" href="/assets/js/9.49213d30.js"><link rel="prefetch" href="/assets/js/10.194074c7.js"><link rel="prefetch" href="/assets/js/11.28772604.js"><link rel="prefetch" href="/assets/js/12.473fa971.js"><link rel="prefetch" href="/assets/js/13.e7244ca3.js"><link rel="prefetch" href="/assets/js/14.9f35604a.js"><link rel="prefetch" href="/assets/js/15.92de29ce.js"><link rel="prefetch" href="/assets/js/16.5081d0f4.js"><link rel="prefetch" href="/assets/js/17.8d7bbf3a.js"><link rel="prefetch" href="/assets/js/18.8b379100.js"><link rel="prefetch" href="/assets/js/19.e6213855.js"><link rel="prefetch" href="/assets/js/20.09855c55.js"><link rel="prefetch" href="/assets/js/21.deccda74.js"><link rel="prefetch" href="/assets/js/22.c3da8c3e.js"><link rel="prefetch" href="/assets/js/23.0f2bdda6.js"><link rel="prefetch" href="/assets/js/24.23916d1d.js"><link rel="prefetch" href="/assets/js/26.638f323d.js"><link rel="prefetch" href="/assets/js/27.9104930e.js"><link rel="prefetch" href="/assets/js/28.f4a9d74b.js"><link rel="prefetch" href="/assets/js/29.a4ffc45d.js"><link rel="prefetch" href="/assets/js/30.34c1be94.js"><link rel="prefetch" href="/assets/js/31.fc4459e1.js"><link rel="prefetch" href="/assets/js/32.6fa53274.js"><link rel="prefetch" href="/assets/js/33.d39ccb38.js"><link rel="prefetch" href="/assets/js/34.95667869.js"><link rel="prefetch" href="/assets/js/35.1c9f7cb6.js"><link rel="prefetch" href="/assets/js/36.c527c4dc.js"><link rel="prefetch" href="/assets/js/37.91db206d.js"><link rel="prefetch" href="/assets/js/39.2b9663c2.js"><link rel="prefetch" href="/assets/js/40.4879e3dd.js"><link rel="prefetch" href="/assets/js/41.bd45403e.js"><link rel="prefetch" href="/assets/js/42.bab6410e.js"><link rel="prefetch" href="/assets/js/43.b6bad706.js"><link rel="prefetch" href="/assets/js/44.3ef4ed34.js"><link rel="prefetch" href="/assets/js/45.4eaec123.js"><link rel="prefetch" href="/assets/js/46.89dbff86.js"><link rel="prefetch" href="/assets/js/47.ec3a4eb4.js"><link rel="prefetch" href="/assets/js/48.1483f745.js"><link rel="prefetch" href="/assets/js/49.ed95d1ac.js"><link rel="prefetch" href="/assets/js/50.1969a022.js"><link rel="prefetch" href="/assets/js/51.8ba405ec.js"><link rel="prefetch" href="/assets/js/52.d10260ca.js"><link rel="prefetch" href="/assets/js/53.4521a8db.js"><link rel="prefetch" href="/assets/js/54.9ad871d9.js"><link rel="prefetch" href="/assets/js/55.58623269.js"><link rel="prefetch" href="/assets/js/56.543fae7f.js"><link rel="prefetch" href="/assets/js/57.c5d65fc9.js"><link rel="prefetch" href="/assets/js/58.04c7d745.js"><link rel="prefetch" href="/assets/js/59.b512423b.js"><link rel="prefetch" href="/assets/js/60.320eda07.js"><link rel="prefetch" href="/assets/js/61.5aae5d3f.js"><link rel="prefetch" href="/assets/js/62.9dfe9e13.js"><link rel="prefetch" href="/assets/js/63.25b34838.js"><link rel="prefetch" href="/assets/js/64.d12d5002.js"><link rel="prefetch" href="/assets/js/65.42b15a91.js"><link rel="prefetch" href="/assets/js/66.cfed3a8a.js"><link rel="prefetch" href="/assets/js/67.1a3b15e5.js"><link rel="prefetch" href="/assets/js/68.9868ce12.js"><link rel="prefetch" href="/assets/js/69.2903063c.js"><link rel="prefetch" href="/assets/js/70.9b5ebefd.js"><link rel="prefetch" href="/assets/js/71.4d376bf0.js"><link rel="prefetch" href="/assets/js/72.c26dd68c.js"><link rel="prefetch" href="/assets/js/73.0c199081.js"><link rel="prefetch" href="/assets/js/74.a575f917.js"><link rel="prefetch" href="/assets/js/75.3bb9db7f.js"><link rel="prefetch" href="/assets/js/76.77eed2ca.js"><link rel="prefetch" href="/assets/js/77.f9cdb120.js"><link rel="prefetch" href="/assets/js/78.81eb4ea8.js"><link rel="prefetch" href="/assets/js/79.bdfedc4c.js"><link rel="prefetch" href="/assets/js/80.80a3c0e7.js"><link rel="prefetch" href="/assets/js/81.1e44050b.js"><link rel="prefetch" href="/assets/js/82.6ac951ca.js"><link rel="prefetch" href="/assets/js/83.9eec4ec5.js"><link rel="prefetch" href="/assets/js/84.43236687.js"><link rel="prefetch" href="/assets/js/85.b06d6363.js">
    <link rel="stylesheet" href="/assets/css/86.styles.1708be3a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      CaiCai9426
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/deploy/jenkins_cicl.html#jenkins" class="nav-link">blog</a></div><div class="nav-item"><a href="/project/" class="nav-link">项目</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/deploy/jenkins_cicl.html#jenkins" class="nav-link">blog</a></div><div class="nav-item"><a href="/project/" class="nav-link">项目</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>vue文档</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/vue/axios-x.html" class="sidebar-link">axios 封装</a></li><li><a href="/vue/axios.html" class="active sidebar-link">axios </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/axios.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/vue/axios.html#简单使用" class="sidebar-link">简单使用</a></li><li class="sidebar-sub-header"><a href="/vue/axios.html#通过配置来发送请求" class="sidebar-link">通过配置来发送请求</a></li><li class="sidebar-sub-header"><a href="/vue/axios.html#并发请求（concurrency）-即是帮助处理并发请求的辅助函数" class="sidebar-link">并发请求（concurrency）,即是帮助处理并发请求的辅助函数</a></li><li class="sidebar-sub-header"><a href="/vue/axios.html#创建一个axios实例，并且可以自定义其配置" class="sidebar-link">创建一个axios实例，并且可以自定义其配置</a></li><li class="sidebar-sub-header"><a href="/vue/axios.html#请求返回的内容" class="sidebar-link">请求返回的内容</a></li><li class="sidebar-sub-header"><a href="/vue/axios.html#默认配置" class="sidebar-link">默认配置</a></li><li class="sidebar-sub-header"><a href="/vue/axios.html#拦截器" class="sidebar-link">拦截器</a></li><li class="sidebar-sub-header"><a href="/vue/axios.html#错误处理" class="sidebar-link">错误处理</a></li><li class="sidebar-sub-header"><a href="/vue/axios.html#取消请求" class="sidebar-link">取消请求</a></li><li class="sidebar-sub-header"><a href="/vue/axios.html#带cookie请求" class="sidebar-link">带cookie请求</a></li></ul></li><li><a href="/vue/compent.html" class="sidebar-link">基于Vue的组件库</a></li><li><a href="/vue/elementUi_table.html" class="sidebar-link">elementUi_table</a></li><li><a href="/vue/vue-all.html" class="sidebar-link">vue 记录</a></li><li><a href="/vue/vue-auth.html" class="sidebar-link">vue 权限控制</a></li><li><a href="/vue/vue-count-to.html" class="sidebar-link">vue-count-to</a></li><li><a href="/vue/vue-deploy.html" class="sidebar-link">vue项目部署</a></li><li><a href="/vue/vue-router.html" class="sidebar-link">Vue-router 路由的基本使用 以及优雅使用keep-alive</a></li><li><a href="/vue/vue-youhua.html" class="sidebar-link">Vue 项目优化</a></li><li><a href="/vue/vue_expend_excel.html" class="sidebar-link">导出信息为excel文件</a></li><li><a href="/vue/vue_mark_scroll.html" class="sidebar-link">vue 移动端屏蔽滑动的遮罩层</a></li><li><a href="/vue/vue_props.html" class="sidebar-link">vue 父子组件时间传递</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>部署</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>JS文档</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>gulp文档</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>git相关文档</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Webpack</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CSS</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="axios"><a href="#axios" aria-hidden="true" class="header-anchor">#</a> axios</h1><h2 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h2><p>利用npm安装<code>npm install axios --save</code></p><h2 id="简单使用"><a href="#简单使用" aria-hidden="true" class="header-anchor">#</a> 简单使用</h2><p>** Get**</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//通过给定的ID来发送请求</span>
axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user?ID=12345'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//以上请求等效于</span>
axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  params<span class="token punctuation">:</span><span class="token punctuation">{</span>
    <span class="token constant">ID</span><span class="token punctuation">:</span><span class="token number">12345</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>post</strong></p><div class="language-js extra-class"><pre class="language-js"><code>axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  firstName<span class="token punctuation">:</span><span class="token string">'Fred'</span><span class="token punctuation">,</span>
  lastName<span class="token punctuation">:</span><span class="token string">'Flintstone'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>一次性并发多个请求</strong></p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getUserAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">getUserPermissions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user/12345/permissions'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
axios<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">getUserAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">getUserPermissions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>axios<span class="token punctuation">.</span><span class="token function">spread</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>acct<span class="token punctuation">,</span>perms<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//当这两个请求都完成的时候会触发这个函数，两个参数分别代表返回的结果</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="通过配置来发送请求"><a href="#通过配置来发送请求" aria-hidden="true" class="header-anchor">#</a> 通过配置来发送请求</h2><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Send a POST request</span>
<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token punctuation">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
  url<span class="token punctuation">:</span> <span class="token string">'/user/12345'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    firstName<span class="token punctuation">:</span> <span class="token string">'Fred'</span><span class="token punctuation">,</span>
    lastName<span class="token punctuation">:</span> <span class="token string">'Flintstone'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// GET request for remote image</span>
<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token punctuation">:</span><span class="token string">'get'</span><span class="token punctuation">,</span>
  url<span class="token punctuation">:</span><span class="token string">'http://bit.ly/2mTM3nY'</span><span class="token punctuation">,</span>
  responseType<span class="token punctuation">:</span><span class="token string">'stream'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  response<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'ada_lovelace.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="并发请求（concurrency）-即是帮助处理并发请求的辅助函数"><a href="#并发请求（concurrency）-即是帮助处理并发请求的辅助函数" aria-hidden="true" class="header-anchor">#</a> 并发请求（concurrency）,即是帮助处理并发请求的辅助函数</h2><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//iterable是一个可以迭代的参数如数组等</span>
axios<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>iterable<span class="token punctuation">)</span>
<span class="token comment">//callback要等到所有请求都完成才会执行</span>
axios<span class="token punctuation">.</span><span class="token function">spread</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
</code></pre></div><h2 id="创建一个axios实例，并且可以自定义其配置"><a href="#创建一个axios实例，并且可以自定义其配置" aria-hidden="true" class="header-anchor">#</a> 创建一个axios实例，并且可以自定义其配置</h2><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  baseURL<span class="token punctuation">:</span><span class="token string">&quot;https://some-domain.com/api/&quot;</span><span class="token punctuation">,</span>
  timeout<span class="token punctuation">:</span><span class="token number">1000</span><span class="token punctuation">,</span>
  headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'X-Custom-Header'</span><span class="token punctuation">:</span><span class="token string">'foobar'</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="配置"><a href="#配置" aria-hidden="true" class="header-anchor">#</a> 配置</h1><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token comment">//`url`是请求的服务器地址</span>
  url<span class="token punctuation">:</span><span class="token string">'/user'</span><span class="token punctuation">,</span>
  <span class="token comment">//`method`是请求资源的方式</span>
  method<span class="token punctuation">:</span><span class="token string">'get'</span><span class="token comment">//default</span>
  <span class="token comment">//如果`url`不是绝对地址，那么`baseURL`将会加到`url`的前面</span>
  <span class="token comment">//当`url`是相对地址的时候，设置`baseURL`会非常的方便</span>
  baseURL<span class="token punctuation">:</span><span class="token string">'https://some-domain.com/api/'</span><span class="token punctuation">,</span>
  <span class="token comment">//`transformRequest`选项允许我们在请求发送到服务器之前对请求的数据做出一些改动</span>
  <span class="token comment">//该选项只适用于以下请求方式：`put/post/patch`</span>
  <span class="token comment">//数组里面的最后一个函数必须返回一个字符串、-一个`ArrayBuffer`或者`Stream`</span>
  transformRequest<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//在这里根据自己的需求改变数据</span>
    <span class="token keyword">return</span> data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">//`transformResponse`选项允许我们在数据传送到`then/catch`方法之前对数据进行改动</span>
  transformResponse<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//在这里根据自己的需求改变数据</span>
    <span class="token keyword">return</span> data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">//`headers`选项是需要被发送的自定义请求头信息</span>
  headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'X-Requested-With'</span><span class="token punctuation">:</span><span class="token string">'XMLHttpRequest'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//`params`选项是要随请求一起发送的请求参数----一般链接在URL后面</span>
  <span class="token comment">//他的类型必须是一个纯对象或者是URLSearchParams对象</span>
  params<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token constant">ID</span><span class="token punctuation">:</span><span class="token number">12345</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//`paramsSerializer`是一个可选的函数，起作用是让参数（params）序列化</span>
  <span class="token comment">//例如(https://www.npmjs.com/package/qs,http://api.jquery.com/jquery.param)</span>
  paramsSerializer<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> Qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span><span class="token punctuation">{</span>arrayFormat<span class="token punctuation">:</span><span class="token string">'brackets'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//`data`选项是作为一个请求体而需要被发送的数据</span>
  <span class="token comment">//该选项只适用于方法：`put/post/patch`</span>
  <span class="token comment">//当没有设置`transformRequest`选项时dada必须是以下几种类型之一</span>
  <span class="token comment">//string/plain/object/ArrayBuffer/ArrayBufferView/URLSearchParams</span>
  <span class="token comment">//仅仅浏览器：FormData/File/Bold</span>
  <span class="token comment">//仅node:Stream</span>
  data <span class="token punctuation">{</span>
    firstName<span class="token punctuation">:</span><span class="token string">&quot;Fred&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//`timeout`选项定义了请求发出的延迟毫秒数</span>
  <span class="token comment">//如果请求花费的时间超过延迟的时间，那么请求会被终止</span>

  timeout<span class="token punctuation">:</span><span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token comment">//`withCredentails`选项表明了是否是跨域请求</span>
  
  withCredentials<span class="token punctuation">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//default</span>
  <span class="token comment">//`adapter`适配器选项允许自定义处理请求，这会使得测试变得方便</span>
  <span class="token comment">//返回一个promise,并提供验证返回</span>
  adapter<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">/*..........*/</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//`auth`表明HTTP基础的认证应该被使用，并提供证书</span>
  <span class="token comment">//这会设置一个authorization头（header）,并覆盖你在header设置的Authorization头信息</span>
  auth<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    username<span class="token punctuation">:</span><span class="token string">&quot;janedoe&quot;</span><span class="token punctuation">,</span>
    password<span class="token punctuation">:</span> <span class="token string">&quot;s00pers3cret&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//返回数据的格式</span>
  <span class="token comment">//其可选项是arraybuffer,blob,document,json,text,stream</span>
  responseType<span class="token punctuation">:</span><span class="token string">'json'</span><span class="token punctuation">,</span><span class="token comment">//default</span>
  <span class="token comment">//</span>
  xsrfCookieName<span class="token punctuation">:</span> <span class="token string">'XSRF-TOKEN'</span><span class="token punctuation">,</span><span class="token comment">//default</span>
  xsrfHeaderName<span class="token punctuation">:</span><span class="token string">'X-XSRF-TOKEN'</span><span class="token punctuation">,</span><span class="token comment">//default</span>
  <span class="token comment">//`onUploadProgress`上传进度事件</span>
  onUploadProgress<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>progressEvent<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//下载进度的事件</span>
onDownloadProgress<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>progressEvent<span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//相应内容的最大值</span>
  maxContentLength<span class="token punctuation">:</span><span class="token number">2000</span><span class="token punctuation">,</span>
  <span class="token comment">//`validateStatus`定义了是否根据http相应状态码，来resolve或者reject promise</span>
  <span class="token comment">//如果`validateStatus`返回true(或者设置为`null`或者`undefined`),那么promise的状态将会是resolved,否则其状态就是rejected</span>
  validateStatus<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> status <span class="token operator">&lt;</span><span class="token number">300</span><span class="token punctuation">;</span><span class="token comment">//default</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//`maxRedirects`定义了在nodejs中重定向的最大数量</span>
  maxRedirects<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token comment">//default</span>
  <span class="token comment">//`httpAgent/httpsAgent`定义了当发送http/https请求要用到的自定义代理</span>
  <span class="token comment">//keeyAlive在选项中没有被默认激活</span>
  httpAgent<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">http<span class="token punctuation">.</span>Agent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>keeyAlive<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  httpsAgent<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">https<span class="token punctuation">.</span>Agent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>keeyAlive<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">//proxy定义了主机名字和端口号，</span>
  <span class="token comment">//`auth`表明http基本认证应该与proxy代理链接，并提供证书</span>
  <span class="token comment">//这将会设置一个`Proxy-Authorization` header,并且会覆盖掉已经存在的`Proxy-Authorization`  header</span>
  proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    host<span class="token punctuation">:</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>
    port<span class="token punctuation">:</span> <span class="token number">9000</span><span class="token punctuation">,</span>
    auth<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      username<span class="token punctuation">:</span><span class="token string">'skda'</span><span class="token punctuation">,</span>
      password<span class="token punctuation">:</span><span class="token string">'radsd'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//`cancelToken`定义了一个用于取消请求的cancel token</span>
  <span class="token comment">//详见cancelation部分</span>
  cancelToken<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">cancelToken</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>cancel<span class="token punctuation">)</span><span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

 
</code></pre></div><h2 id="请求返回的内容"><a href="#请求返回的内容" aria-hidden="true" class="header-anchor">#</a> 请求返回的内容</h2><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token comment">// `data` is the response that was provided by the server</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 
  <span class="token comment">// `status` is the HTTP status code from the server response</span>
  status<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
 
  <span class="token comment">// `statusText` is the HTTP status message from the server response</span>
  statusText<span class="token punctuation">:</span> <span class="token string">'OK'</span><span class="token punctuation">,</span>
 
  <span class="token comment">// `headers` the headers that the server responded with</span>
  <span class="token comment">// All header names are lower cased</span>
  headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 
  <span class="token comment">// `config` is the config that was provided to `axios` for the request</span>
  config<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 
  <span class="token comment">// `request` is the request that generated this response</span>
  <span class="token comment">// It is the last ClientRequest instance in node.js (in redirects)</span>
  <span class="token comment">// and an XMLHttpRequest instance the browser</span>
  request<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

你可以这样来获取响应信息
axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="默认配置"><a href="#默认配置" aria-hidden="true" class="header-anchor">#</a> 默认配置</h2><p>你可以设置默认配置，对所有请求都有效
1、 全局默认配置</p><div class="language-js extra-class"><pre class="language-js"><code>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">'http://api.exmple.com'</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>common<span class="token punctuation">[</span><span class="token string">'Authorization'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">AUTH_TOKEN</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>post<span class="token punctuation">[</span><span class="token string">'content-Type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'appliction/x-www-form-urlencoded'</span><span class="token punctuation">;</span>
</code></pre></div><p>2、 自定义的实例默认设置</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//当创建实例的时候配置默认配置</span>
<span class="token keyword">var</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    baseURL<span class="token punctuation">:</span> <span class="token string">'https://api.example.com'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//当实例创建时候修改配置</span>
instance<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>common<span class="token punctuation">[</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">AUTH_TOKEN</span><span class="token punctuation">;</span>
</code></pre></div><p>3、 配置中的有优先级
config配置将会以优先级别来合并，顺序是lib/defauts.js中的默认配置，然后是实例中的默认配置，最后是请求中的config参数的配置，越往后等级越高，后面的会覆盖前面的例子。</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//创建一个实例的时候会使用libray目录中的默认配置</span>
<span class="token comment">//在这里timeout配置的值为0，来自于libray的默认值</span>
<span class="token keyword">var</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//回覆盖掉library的默认值</span>
<span class="token comment">//现在所有的请求都要等2.5S之后才会发出</span>
instance<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">2500</span><span class="token punctuation">;</span>
<span class="token comment">//这里的timeout回覆盖之前的2.5S变成5s</span>
instance<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/longRequest'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  timeout<span class="token punctuation">:</span> <span class="token number">5000</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="拦截器"><a href="#拦截器" aria-hidden="true" class="header-anchor">#</a> 拦截器</h2><p>你可以在请求、响应在到达then/catch之前拦截他们</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//添加一个请求拦截器</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//在请求发出之前进行一些操作</span>
  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//Do something with request error</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//添加一个响应拦截器</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//在这里对返回的数据进行处理</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//Do something with response error</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>2、取消拦截器</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> myInterceptor <span class="token operator">=</span> axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/*....*/</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">eject</span><span class="token punctuation">(</span>myInterceptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="错误处理"><a href="#错误处理" aria-hidden="true" class="header-anchor">#</a> 错误处理</h2><div class="language-js extra-class"><pre class="language-js"><code>axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//请求已经发出，但是服务器响应返回的状态吗不在2xx的范围内</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">//一些错误是在设置请求的时候触发</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Error'</span><span class="token punctuation">,</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="取消请求"><a href="#取消请求" aria-hidden="true" class="header-anchor">#</a> 取消请求</h2><p>你可以通过一个<code>cancel token</code>来取消一个请求
你可以通过C<code>ancelToken.source</code>工厂函数来创建一个<code>cancel token</code></p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> CancelToken <span class="token operator">=</span> axios<span class="token punctuation">.</span>CancelToken<span class="token punctuation">;</span>
<span class="token keyword">var</span> source <span class="token operator">=</span> CancelToken<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
 cancelToken<span class="token punctuation">:</span> source<span class="token punctuation">.</span>token
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>thrown<span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">if</span><span class="token punctuation">(</span>axios<span class="token punctuation">.</span><span class="token function">isCancel</span><span class="token punctuation">(</span>thrown<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Request canceled'</span><span class="token punctuation">,</span>thrown<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
   <span class="token comment">//handle error</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//取消请求（信息的参数可以设置的）</span>
source<span class="token punctuation">.</span><span class="token function">cance</span><span class="token punctuation">(</span><span class="token string">&quot;操作被用户取消&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>你可以给<code>cancelToken</code>构造函数传递一个executor function来创建一个cancel token:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> cancelToken <span class="token operator">=</span> axios<span class="token punctuation">.</span>CancelToken<span class="token punctuation">;</span>
<span class="token keyword">var</span> cance<span class="token punctuation">;</span>
axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  cancelToken<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">CancelToken</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//这个executor函数接受一个cancel function作为参数</span>
    cancel <span class="token operator">=</span> c<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//取消请求</span>
<span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
</code></pre></div><h2 id="带cookie请求"><a href="#带cookie请求" aria-hidden="true" class="header-anchor">#</a> 带cookie请求</h2><p>axios默认是请求的时候不会带上cookie的，需要通过设置withCredentials: true来解决。</p><h1 id="axios-上传进度"><a href="#axios-上传进度" aria-hidden="true" class="header-anchor">#</a> axios 上传进度</h1><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            url<span class="token punctuation">:</span><span class="token string">'/handler/material/upload'</span><span class="token punctuation">,</span>
            method<span class="token punctuation">:</span><span class="token string">'post'</span><span class="token punctuation">,</span>
            onUploadProgress<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>progressEvent<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//原生获取上传进度的事件</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>progressEvent<span class="token punctuation">.</span>lengthComputable<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token comment">//属性lengthComputable主要表明总共需要完成的工作量和已经完成的工作是否可以被测量</span>
                    <span class="token comment">//如果lengthComputable为false，就获取不到progressEvent.total和progressEvent.loaded</span>
                    <span class="token function">callback1</span><span class="token punctuation">(</span>progressEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">var</span> complete <span class="token operator">=</span> <span class="token punctuation">(</span>progressEvent<span class="token punctuation">.</span>loaded <span class="token operator">/</span> progressEvent<span class="token punctuation">.</span>total <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">|</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'%'</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            data<span class="token punctuation">:</span>payload
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div><div class="content edit-link"><!----><!----></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/vue/axios-x.html" class="prev">
          axios 封装
        </a></span><span class="next"><a href="/vue/compent.html">
          基于Vue的组件库
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/25.4a28d9a1.js" defer></script><script src="/assets/js/app.fa713eac.js" defer></script>
  </body>
</html>
